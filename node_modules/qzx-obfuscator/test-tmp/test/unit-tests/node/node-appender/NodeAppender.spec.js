"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ServiceIdentifiers_1 = require("../../../../src/container/ServiceIdentifiers");
var chai_1 = require("chai");
var readFileAsString_1 = require("../../../helpers/readFileAsString");
var InversifyContainerFacade_1 = require("../../../../src/container/InversifyContainerFacade");
var NodeAppender_1 = require("../../../../src/node/NodeAppender");
var Nodes_1 = require("../../../../src/node/Nodes");
var NodeUtils_1 = require("../../../../src/node/NodeUtils");
var convertCodeToStructure = function convertCodeToStructure(fixturePath) {
    return NodeUtils_1.NodeUtils.convertCodeToStructure(readFileAsString_1.readFileAsString("" + __dirname + fixturePath));
};
var convertCodeToAst = function convertCodeToAst(fixturePath) {
    return Nodes_1.Nodes.getProgramNode(convertCodeToStructure(fixturePath));
};
describe('NodeAppender', function () {
    describe('appendNode (blockScopeNode: TNodeWithBlockStatement[], nodeBodyStatements: TStatement[]): void', function () {
        var astTree = void 0,
            expectedAstTree = void 0,
            node = void 0;
        before(function () {
            node = convertCodeToStructure('/fixtures/simple-input.js');
            astTree = convertCodeToAst('/fixtures/append-node.js');
            expectedAstTree = convertCodeToAst('/fixtures/append-node-expected.js');
            astTree = NodeUtils_1.NodeUtils.parentize(astTree);
            expectedAstTree = NodeUtils_1.NodeUtils.parentize(expectedAstTree);
            NodeAppender_1.NodeAppender.appendNode(astTree, node);
        });
        it('should append given node to a `BlockStatement` node body', function () {
            chai_1.assert.deepEqual(astTree, expectedAstTree);
        });
    });
    describe('appendNodeToOptimalBlockScope (blockScopeStackTraceData: IStackTraceData[], blockScopeNode: TNodeWithBlockStatement, nodeBodyStatements: TStatement[], index: number = 0): void', function () {
        var stackTraceAnalyzer = void 0,
            astTree = void 0,
            expectedAstTree = void 0,
            node = void 0,
            stackTraceData = void 0;
        before(function () {
            var inversifyContainerFacade = new InversifyContainerFacade_1.InversifyContainerFacade();
            inversifyContainerFacade.load('', {});
            stackTraceAnalyzer = inversifyContainerFacade.get(ServiceIdentifiers_1.ServiceIdentifiers.IStackTraceAnalyzer);
        });
        beforeEach(function () {
            node = convertCodeToStructure('/fixtures/simple-input.js');
        });
        describe('variant #1: nested function calls', function () {
            beforeEach(function () {
                astTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/variant-1.js');
                expectedAstTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/variant-1-expected.js');
                stackTraceData = stackTraceAnalyzer.analyze(astTree.body);
                NodeAppender_1.NodeAppender.appendNodeToOptimalBlockScope(stackTraceData, astTree, node);
            });
            it('should append node into first and deepest function call in nested function calls', function () {
                chai_1.assert.deepEqual(astTree, expectedAstTree);
            });
        });
        describe('variant #2: nested function calls', function () {
            beforeEach(function () {
                astTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/variant-2.js');
                expectedAstTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/variant-2-expected.js');
                stackTraceData = stackTraceAnalyzer.analyze(astTree.body);
                NodeAppender_1.NodeAppender.appendNodeToOptimalBlockScope(stackTraceData, astTree, node);
            });
            it('should append node into first and deepest function call in nested function calls', function () {
                chai_1.assert.deepEqual(astTree, expectedAstTree);
            });
        });
        describe('append by specific index', function () {
            var astTree = void 0;
            beforeEach(function () {
                astTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/by-index.js');
            });
            describe('variant #1: append by specific index in nested function calls', function () {
                beforeEach(function () {
                    expectedAstTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/by-index-variant-1-expected.js');
                    stackTraceData = stackTraceAnalyzer.analyze(astTree.body);
                    NodeAppender_1.NodeAppender.appendNodeToOptimalBlockScope(stackTraceData, astTree, node, 2);
                });
                it('should append node into deepest function call by specified index in nested function calls', function () {
                    chai_1.assert.deepEqual(astTree, expectedAstTree);
                });
            });
            describe('variant #2: append by specific index in nested function calls', function () {
                beforeEach(function () {
                    expectedAstTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/by-index-variant-2-expected.js');
                    stackTraceData = stackTraceAnalyzer.analyze(astTree.body);
                    NodeAppender_1.NodeAppender.appendNodeToOptimalBlockScope(stackTraceData, astTree, node, 1);
                });
                it('should append node into deepest function call by specified index in nested function calls', function () {
                    chai_1.assert.deepEqual(astTree, expectedAstTree);
                });
            });
            describe('variant #3: append by specific index in nested function calls', function () {
                beforeEach(function () {
                    astTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/by-index-variant-3.js');
                    expectedAstTree = convertCodeToAst('/fixtures/append-node-to-optimal-block-scope/by-index-variant-3-expected.js');
                    stackTraceData = stackTraceAnalyzer.analyze(astTree.body);
                    NodeAppender_1.NodeAppender.appendNodeToOptimalBlockScope(stackTraceData, astTree, node, stackTraceData.length - 1);
                });
                it('should append node into deepest function call by specified index in nested function calls', function () {
                    chai_1.assert.deepEqual(astTree, expectedAstTree);
                });
            });
        });
    });
    describe('insertNodeAtIndex (blockScopeNode: TNodeWithBlockStatement[], nodeBodyStatements: TStatement[], index: number): void', function () {
        var astTree = void 0,
            expectedAstTree = void 0,
            node = void 0;
        before(function () {
            node = convertCodeToStructure('/fixtures/simple-input.js');
            astTree = convertCodeToAst('/fixtures/insert-node-at-index.js');
            expectedAstTree = convertCodeToAst('/fixtures/insert-node-at-index-expected.js');
            astTree = NodeUtils_1.NodeUtils.parentize(astTree);
            expectedAstTree = NodeUtils_1.NodeUtils.parentize(expectedAstTree);
            NodeAppender_1.NodeAppender.insertNodeAtIndex(astTree, node, 2);
        });
        it('should insert given node in `BlockStatement` node body at index', function () {
            chai_1.assert.deepEqual(astTree, expectedAstTree);
        });
    });
    describe('prependNode (blockScopeNode: TNodeWithBlockStatement[], nodeBodyStatements: TStatement[]): void', function () {
        var astTree = void 0,
            expectedAstTree = void 0,
            node = void 0;
        before(function () {
            node = convertCodeToStructure('/fixtures/simple-input.js');
            astTree = convertCodeToAst('/fixtures/prepend-node.js');
            expectedAstTree = convertCodeToAst('/fixtures/prepend-node-expected.js');
            astTree = NodeUtils_1.NodeUtils.parentize(astTree);
            expectedAstTree = NodeUtils_1.NodeUtils.parentize(expectedAstTree);
            NodeAppender_1.NodeAppender.prependNode(astTree, node);
        });
        it('should prepend given node to a `BlockStatement` node body', function () {
            chai_1.assert.deepEqual(astTree, expectedAstTree);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm9kZUFwcGVuZGVyLnNwZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZXN0L3VuaXQtdGVzdHMvbm9kZS9ub2RlLWFwcGVuZGVyL05vZGVBcHBlbmRlci5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG1DQUFrRjtBQUlsRixxQkFBOEI7QUFROUIsaUNBQXFFO0FBRXJFLHlDQUE4RjtBQUM5Riw2QkFBaUU7QUFDakUsc0JBQW1EO0FBQ25ELDBCQUEyRDtBQU0zRCxJQUFNLEFBQXNCLHlCQUEwQyxnQ0FBQyxBQUFXO0FBQzlFLEFBQU0sV0FBQyxZQUFTLFVBQUMsQUFBc0IsdUJBQ25DLG1CQUFnQixBQUFDLHNCQUFHLEFBQVMsWUFBRyxBQUFXLEFBQUUsQUFBQyxBQUNqRCxBQUFDLEFBQ047QUFBQyxBQUFDO0FBTUYsSUFBTSxBQUFnQixtQkFBNEMsMEJBQUMsQUFBVztBQUMxRSxBQUFNLFdBQUMsUUFBSyxNQUFDLEFBQWMsZUFBQyxBQUFzQix1QkFBQyxBQUFXLEFBQUMsQUFBQyxBQUFDLEFBQ3JFO0FBQUMsQUFBQztBQUVGLEFBQVEsU0FBQyxBQUFjLGdCQUFFO0FBQ3JCLEFBQVEsYUFBQyxBQUFnRyxrR0FBRTtBQUN2RyxZQUFJLEFBQXVCO1lBQ3ZCLEFBQStCO1lBQy9CLEFBQWtCLEFBQUM7QUFFdkIsQUFBTSxlQUFDO0FBQ0gsQUFBSSxtQkFBRyxBQUFzQix1QkFBQyxBQUEyQixBQUFDLEFBQUM7QUFDM0QsQUFBTyxzQkFBRyxBQUFnQixpQkFBQyxBQUEwQixBQUFDLEFBQUM7QUFDdkQsQUFBZSw4QkFBRyxBQUFnQixpQkFBQyxBQUFtQyxBQUFDLEFBQUM7QUFFeEUsQUFBTyxzQkFBRyxZQUFTLFVBQUMsQUFBUyxVQUFDLEFBQU8sQUFBQyxBQUFDO0FBQ3ZDLEFBQWUsOEJBQUcsWUFBUyxVQUFDLEFBQVMsVUFBQyxBQUFlLEFBQUMsQUFBQztBQUV2RCwyQkFBWSxhQUFDLEFBQVUsV0FB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LFNBQUUsQUFBSSxBQUFDLEFBQUMsQUFDNUM7QUFBQyxBQUFDLEFBQUM7QUFFSCxBQUFFLFdBQUMsQUFBMkQsNkRBQUU7QUFDNUQsbUJBQU0sT0FBQyxBQUFTLFVBQUMsQUFBTyxTQUFFLEFBQWUsQUFBQyxBQUFDLEFBQy9DO0FBQUMsQUFBQyxBQUFDLEFBQ1A7QUFBQyxBQUFDLEFBQUMsQUFDUDtBQUFDLEFBQUMsQUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcnZpY2VJZGVudGlmaWVycyB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9jb250YWluZXIvU2VydmljZUlkZW50aWZpZXJzJztcblxuaW1wb3J0ICogYXMgRVNUcmVlIGZyb20gJ2VzdHJlZSc7XG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJ2NoYWknO1xuXG5pbXBvcnQgeyBUU3RhdGVtZW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL3R5cGVzL25vZGUvVFN0YXRlbWVudCc7XG5cbmltcG9ydCB7IElJbnZlcnNpZnlDb250YWluZXJGYWNhZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvaW50ZXJmYWNlcy9jb250YWluZXIvSUludmVyc2lmeUNvbnRhaW5lckZhY2FkZSc7XG5pbXBvcnQgeyBJU3RhY2tUcmFjZUFuYWx5emVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2ludGVyZmFjZXMvc3RhY2stdHJhY2UtYW5hbHl6ZXIvSVN0YWNrVHJhY2VBbmFseXplcic7XG5pbXBvcnQgeyBJU3RhY2tUcmFjZURhdGEgfSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvaW50ZXJmYWNlcy9zdGFjay10cmFjZS1hbmFseXplci9JU3RhY2tUcmFjZURhdGEnO1xuXG5pbXBvcnQgeyByZWFkRmlsZUFzU3RyaW5nIH0gZnJvbSAnLi4vLi4vLi4vaGVscGVycy9yZWFkRmlsZUFzU3RyaW5nJztcblxuaW1wb3J0IHsgSW52ZXJzaWZ5Q29udGFpbmVyRmFjYWRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2NvbnRhaW5lci9JbnZlcnNpZnlDb250YWluZXJGYWNhZGUnO1xuaW1wb3J0IHsgTm9kZUFwcGVuZGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL25vZGUvTm9kZUFwcGVuZGVyJztcbmltcG9ydCB7IE5vZGVzIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL25vZGUvTm9kZXMnO1xuaW1wb3J0IHsgTm9kZVV0aWxzIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL25vZGUvTm9kZVV0aWxzJztcblxuLyoqXG4gKiBAcGFyYW0gZml4dHVyZVBhdGhcbiAqIEByZXR1cm4ge1RTdGF0ZW1lbnRbXX1cbiAqL1xuY29uc3QgY29udmVydENvZGVUb1N0cnVjdHVyZTogKGZpeHR1cmVQYXRoOiBzdHJpbmcpID0+IFRTdGF0ZW1lbnRbXSA9IChmaXh0dXJlUGF0aCkgPT4ge1xuICAgIHJldHVybiBOb2RlVXRpbHMuY29udmVydENvZGVUb1N0cnVjdHVyZShcbiAgICAgICAgcmVhZEZpbGVBc1N0cmluZyhgJHtfX2Rpcm5hbWV9JHtmaXh0dXJlUGF0aH1gKVxuICAgICk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSBmaXh0dXJlUGF0aFxuICogQHJldHVybiB7RVNUcmVlLlByb2dyYW19XG4gKi9cbmNvbnN0IGNvbnZlcnRDb2RlVG9Bc3Q6IChmaXh0dXJlUGF0aDogc3RyaW5nKSA9PiBFU1RyZWUuUHJvZ3JhbSA9IChmaXh0dXJlUGF0aCkgPT4ge1xuICAgIHJldHVybiBOb2Rlcy5nZXRQcm9ncmFtTm9kZShjb252ZXJ0Q29kZVRvU3RydWN0dXJlKGZpeHR1cmVQYXRoKSk7XG59O1xuXG5kZXNjcmliZSgnTm9kZUFwcGVuZGVyJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdhcHBlbmROb2RlIChibG9ja1Njb3BlTm9kZTogVE5vZGVXaXRoQmxvY2tTdGF0ZW1lbnRbXSwgbm9kZUJvZHlTdGF0ZW1lbnRzOiBUU3RhdGVtZW50W10pOiB2b2lkJywgKCkgPT4ge1xuICAgICAgICBsZXQgYXN0VHJlZTogRVNUcmVlLlByb2dyYW0sXG4gICAgICAgICAgICBleHBlY3RlZEFzdFRyZWU6IEVTVHJlZS5Qcm9ncmFtLFxuICAgICAgICAgICAgbm9kZTogVFN0YXRlbWVudFtdO1xuXG4gICAgICAgIGJlZm9yZSgoKSA9PiB7XG4gICAgICAgICAgICBub2RlID0gY29udmVydENvZGVUb1N0cnVjdHVyZSgnL2ZpeHR1cmVzL3NpbXBsZS1pbnB1dC5qcycpO1xuICAgICAgICAgICAgYXN0VHJlZSA9IGNvbnZlcnRDb2RlVG9Bc3QoJy9maXh0dXJlcy9hcHBlbmQtbm9kZS5qcycpO1xuICAgICAgICAgICAgZXhwZWN0ZWRBc3RUcmVlID0gY29udmVydENvZGVUb0FzdCgnL2ZpeHR1cmVzL2FwcGVuZC1ub2RlLWV4cGVjdGVkLmpzJyk7XG5cbiAgICAgICAgICAgIGFzdFRyZWUgPSBOb2RlVXRpbHMucGFyZW50aXplKGFzdFRyZWUpO1xuICAgICAgICAgICAgZXhwZWN0ZWRBc3RUcmVlID0gTm9kZVV0aWxzLnBhcmVudGl6ZShleHBlY3RlZEFzdFRyZWUpO1xuXG4gICAgICAgICAgICBOb2RlQXBwZW5kZXIuYXBwZW5kTm9kZShhc3RUcmVlLCBub2RlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBhcHBlbmQgZ2l2ZW4gbm9kZSB0byBhIGBCbG9ja1N0YXRlbWVudGAgbm9kZSBib2R5JywgKCkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChhc3RUcmVlLCBleHBlY3RlZEFzdFRyZWUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdhcHBlbmROb2RlVG9PcHRpbWFsQmxvY2tTY29wZSAoYmxvY2tTY29wZVN0YWNrVHJhY2VEYXRhOiBJU3RhY2tUcmFjZURhdGFbXSwgYmxvY2tTY29wZU5vZGU6IFROb2RlV2l0aEJsb2NrU3RhdGVtZW50LCBub2RlQm9keVN0YXRlbWVudHM6IFRTdGF0ZW1lbnRbXSwgaW5kZXg6IG51bWJlciA9IDApOiB2b2lkJywgKCkgPT4ge1xuICAgICAgICBsZXQgc3RhY2tUcmFjZUFuYWx5emVyOiBJU3RhY2tUcmFjZUFuYWx5emVyLFxuICAgICAgICAgICAgYXN0VHJlZTogRVNUcmVlLlByb2dyYW0sXG4gICAgICAgICAgICBleHBlY3RlZEFzdFRyZWU6IEVTVHJlZS5Qcm9ncmFtLFxuICAgICAgICAgICAgbm9kZTogVFN0YXRlbWVudFtdLFxuICAgICAgICAgICAgc3RhY2tUcmFjZURhdGE6IElTdGFja1RyYWNlRGF0YVtdO1xuXG4gICAgICAgIGJlZm9yZSgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnZlcnNpZnlDb250YWluZXJGYWNhZGU6IElJbnZlcnNpZnlDb250YWluZXJGYWNhZGUgPSBuZXcgSW52ZXJzaWZ5Q29udGFpbmVyRmFjYWRlKCk7XG5cbiAgICAgICAgICAgIGludmVyc2lmeUNvbnRhaW5lckZhY2FkZS5sb2FkKCcnLCB7fSk7XG4gICAgICAgICAgICBzdGFja1RyYWNlQW5hbHl6ZXIgPSBpbnZlcnNpZnlDb250YWluZXJGYWNhZGVcbiAgICAgICAgICAgICAgICAuZ2V0PElTdGFja1RyYWNlQW5hbHl6ZXI+KFNlcnZpY2VJZGVudGlmaWVycy5JU3RhY2tUcmFjZUFuYWx5emVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBub2RlID0gY29udmVydENvZGVUb1N0cnVjdHVyZSgnL2ZpeHR1cmVzL3NpbXBsZS1pbnB1dC5qcycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZSgndmFyaWFudCAjMTogbmVzdGVkIGZ1bmN0aW9uIGNhbGxzJywgKCkgPT4ge1xuICAgICAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXN0VHJlZSA9IGNvbnZlcnRDb2RlVG9Bc3QoJy9maXh0dXJlcy9hcHBlbmQtbm9kZS10by1vcHRpbWFsLWJsb2NrLXNjb3BlL3ZhcmlhbnQtMS5qcycpO1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkQXN0VHJlZSA9IGNvbnZlcnRDb2RlVG9Bc3QoJy9maXh0dXJlcy9hcHBlbmQtbm9kZS10by1vcHRpbWFsLWJsb2NrLXNjb3BlL3ZhcmlhbnQtMS1leHBlY3RlZC5qcycpO1xuXG4gICAgICAgICAgICAgICAgc3RhY2tUcmFjZURhdGEgPSBzdGFja1RyYWNlQW5hbHl6ZXIuYW5hbHl6ZShhc3RUcmVlLmJvZHkpO1xuICAgICAgICAgICAgICAgIE5vZGVBcHBlbmRlci5hcHBlbmROb2RlVG9PcHRpbWFsQmxvY2tTY29wZShzdGFja1RyYWNlRGF0YSwgYXN0VHJlZSwgbm9kZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXQoJ3Nob3VsZCBhcHBlbmQgbm9kZSBpbnRvIGZpcnN0IGFuZCBkZWVwZXN0IGZ1bmN0aW9uIGNhbGwgaW4gbmVzdGVkIGZ1bmN0aW9uIGNhbGxzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFzc2VydC5kZWVwRXF1YWwoYXN0VHJlZSwgZXhwZWN0ZWRBc3RUcmVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZSgndmFyaWFudCAjMjogbmVzdGVkIGZ1bmN0aW9uIGNhbGxzJywgKCkgPT4ge1xuICAgICAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXN0VHJlZSA9IGNvbnZlcnRDb2RlVG9Bc3QoJy9maXh0dXJlcy9hcHBlbmQtbm9kZS10by1vcHRpbWFsLWJsb2NrLXNjb3BlL3ZhcmlhbnQtMi5qcycpO1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkQXN0VHJlZSA9IGNvbnZlcnRDb2RlVG9Bc3QoJy9maXh0dXJlcy9hcHBlbmQtbm9kZS10by1vcHRpbWFsLWJsb2NrLXNjb3BlL3ZhcmlhbnQtMi1leHBlY3RlZC5qcycpO1xuXG4gICAgICAgICAgICAgICAgc3RhY2tUcmFjZURhdGEgPSBzdGFja1RyYWNlQW5hbHl6ZXIuYW5hbHl6ZShhc3RUcmVlLmJvZHkpO1xuICAgICAgICAgICAgICAgIE5vZGVBcHBlbmRlci5hcHBlbmROb2RlVG9PcHRpbWFsQmxvY2tTY29wZShzdGFja1RyYWNlRGF0YSwgYXN0VHJlZSwgbm9kZSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkIGFwcGVuZCBub2RlIGludG8gZmlyc3QgYW5kIGRlZXBlc3QgZnVuY3Rpb24gY2FsbCBpbiBuZXN0ZWQgZnVuY3Rpb24gY2FsbHMnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChhc3RUcmVlLCBleHBlY3RlZEFzdFRyZWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlc2NyaWJlKCdhcHBlbmQgYnkgc3BlY2lmaWMgaW5kZXgnLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgYXN0VHJlZTogRVNUcmVlLlByb2dyYW07XG5cbiAgICAgICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFzdFRyZWUgPSBjb252ZXJ0Q29kZVRvQXN0KCcvZml4dHVyZXMvYXBwZW5kLW5vZGUtdG8tb3B0aW1hbC1ibG9jay1zY29wZS9ieS1pbmRleC5qcycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRlc2NyaWJlKCd2YXJpYW50ICMxOiBhcHBlbmQgYnkgc3BlY2lmaWMgaW5kZXggaW4gbmVzdGVkIGZ1bmN0aW9uIGNhbGxzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBleHBlY3RlZEFzdFRyZWUgPSBjb252ZXJ0Q29kZVRvQXN0KCcvZml4dHVyZXMvYXBwZW5kLW5vZGUtdG8tb3B0aW1hbC1ibG9jay1zY29wZS9ieS1pbmRleC12YXJpYW50LTEtZXhwZWN0ZWQuanMnKTtcblxuICAgICAgICAgICAgICAgICAgICBzdGFja1RyYWNlRGF0YSA9IHN0YWNrVHJhY2VBbmFseXplci5hbmFseXplKGFzdFRyZWUuYm9keSk7XG4gICAgICAgICAgICAgICAgICAgIE5vZGVBcHBlbmRlci5hcHBlbmROb2RlVG9PcHRpbWFsQmxvY2tTY29wZShzdGFja1RyYWNlRGF0YSwgYXN0VHJlZSwgbm9kZSwgMik7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGl0KCdzaG91bGQgYXBwZW5kIG5vZGUgaW50byBkZWVwZXN0IGZ1bmN0aW9uIGNhbGwgYnkgc3BlY2lmaWVkIGluZGV4IGluIG5lc3RlZCBmdW5jdGlvbiBjYWxscycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChhc3RUcmVlLCBleHBlY3RlZEFzdFRyZWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRlc2NyaWJlKCd2YXJpYW50ICMyOiBhcHBlbmQgYnkgc3BlY2lmaWMgaW5kZXggaW4gbmVzdGVkIGZ1bmN0aW9uIGNhbGxzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBleHBlY3RlZEFzdFRyZWUgPSBjb252ZXJ0Q29kZVRvQXN0KCcvZml4dHVyZXMvYXBwZW5kLW5vZGUtdG8tb3B0aW1hbC1ibG9jay1zY29wZS9ieS1pbmRleC12YXJpYW50LTItZXhwZWN0ZWQuanMnKTtcblxuICAgICAgICAgICAgICAgICAgICBzdGFja1RyYWNlRGF0YSA9IHN0YWNrVHJhY2VBbmFseXplci5hbmFseXplKGFzdFRyZWUuYm9keSk7XG4gICAgICAgICAgICAgICAgICAgIE5vZGVBcHBlbmRlci5hcHBlbmROb2RlVG9PcHRpbWFsQmxvY2tTY29wZShzdGFja1RyYWNlRGF0YSwgYXN0VHJlZSwgbm9kZSwgMSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGl0KCdzaG91bGQgYXBwZW5kIG5vZGUgaW50byBkZWVwZXN0IGZ1bmN0aW9uIGNhbGwgYnkgc3BlY2lmaWVkIGluZGV4IGluIG5lc3RlZCBmdW5jdGlvbiBjYWxscycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChhc3RUcmVlLCBleHBlY3RlZEFzdFRyZWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRlc2NyaWJlKCd2YXJpYW50ICMzOiBhcHBlbmQgYnkgc3BlY2lmaWMgaW5kZXggaW4gbmVzdGVkIGZ1bmN0aW9uIGNhbGxzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhc3RUcmVlID0gY29udmVydENvZGVUb0FzdCgnL2ZpeHR1cmVzL2FwcGVuZC1ub2RlLXRvLW9wdGltYWwtYmxvY2stc2NvcGUvYnktaW5kZXgtdmFyaWFudC0zLmpzJyk7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkQXN0VHJlZSA9IGNvbnZlcnRDb2RlVG9Bc3QoJy9maXh0dXJlcy9hcHBlbmQtbm9kZS10by1vcHRpbWFsLWJsb2NrLXNjb3BlL2J5LWluZGV4LXZhcmlhbnQtMy1leHBlY3RlZC5qcycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrVHJhY2VEYXRhID0gc3RhY2tUcmFjZUFuYWx5emVyLmFuYWx5emUoYXN0VHJlZS5ib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgTm9kZUFwcGVuZGVyLmFwcGVuZE5vZGVUb09wdGltYWxCbG9ja1Njb3BlKFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tUcmFjZURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3RUcmVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrVHJhY2VEYXRhLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaXQoJ3Nob3VsZCBhcHBlbmQgbm9kZSBpbnRvIGRlZXBlc3QgZnVuY3Rpb24gY2FsbCBieSBzcGVjaWZpZWQgaW5kZXggaW4gbmVzdGVkIGZ1bmN0aW9uIGNhbGxzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKGFzdFRyZWUsIGV4cGVjdGVkQXN0VHJlZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnaW5zZXJ0Tm9kZUF0SW5kZXggKGJsb2NrU2NvcGVOb2RlOiBUTm9kZVdpdGhCbG9ja1N0YXRlbWVudFtdLCBub2RlQm9keVN0YXRlbWVudHM6IFRTdGF0ZW1lbnRbXSwgaW5kZXg6IG51bWJlcik6IHZvaWQnLCAoKSA9PiB7XG4gICAgICAgIGxldCBhc3RUcmVlOiBFU1RyZWUuUHJvZ3JhbSxcbiAgICAgICAgICAgIGV4cGVjdGVkQXN0VHJlZTogRVNUcmVlLlByb2dyYW0sXG4gICAgICAgICAgICBub2RlOiBUU3RhdGVtZW50W107XG5cbiAgICAgICAgYmVmb3JlKCgpID0+IHtcbiAgICAgICAgICAgIG5vZGUgPSBjb252ZXJ0Q29kZVRvU3RydWN0dXJlKCcvZml4dHVyZXMvc2ltcGxlLWlucHV0LmpzJyk7XG4gICAgICAgICAgICBhc3RUcmVlID0gY29udmVydENvZGVUb0FzdCgnL2ZpeHR1cmVzL2luc2VydC1ub2RlLWF0LWluZGV4LmpzJyk7XG4gICAgICAgICAgICBleHBlY3RlZEFzdFRyZWUgPSBjb252ZXJ0Q29kZVRvQXN0KCcvZml4dHVyZXMvaW5zZXJ0LW5vZGUtYXQtaW5kZXgtZXhwZWN0ZWQuanMnKTtcblxuICAgICAgICAgICAgYXN0VHJlZSA9IE5vZGVVdGlscy5wYXJlbnRpemUoYXN0VHJlZSk7XG4gICAgICAgICAgICBleHBlY3RlZEFzdFRyZWUgPSBOb2RlVXRpbHMucGFyZW50aXplKGV4cGVjdGVkQXN0VHJlZSk7XG5cbiAgICAgICAgICAgIE5vZGVBcHBlbmRlci5pbnNlcnROb2RlQXRJbmRleChhc3RUcmVlLCBub2RlLCAyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbnNlcnQgZ2l2ZW4gbm9kZSBpbiBgQmxvY2tTdGF0ZW1lbnRgIG5vZGUgYm9keSBhdCBpbmRleCcsICgpID0+IHtcbiAgICAgICAgICAgIGFzc2VydC5kZWVwRXF1YWwoYXN0VHJlZSwgZXhwZWN0ZWRBc3RUcmVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncHJlcGVuZE5vZGUgKGJsb2NrU2NvcGVOb2RlOiBUTm9kZVdpdGhCbG9ja1N0YXRlbWVudFtdLCBub2RlQm9keVN0YXRlbWVudHM6IFRTdGF0ZW1lbnRbXSk6IHZvaWQnLCAoKSA9PiB7XG4gICAgICAgIGxldCBhc3RUcmVlOiBFU1RyZWUuUHJvZ3JhbSxcbiAgICAgICAgICAgIGV4cGVjdGVkQXN0VHJlZTogRVNUcmVlLlByb2dyYW0sXG4gICAgICAgICAgICBub2RlOiBUU3RhdGVtZW50W107XG5cbiAgICAgICAgYmVmb3JlKCgpID0+IHtcbiAgICAgICAgICAgIG5vZGUgPSBjb252ZXJ0Q29kZVRvU3RydWN0dXJlKCcvZml4dHVyZXMvc2ltcGxlLWlucHV0LmpzJyk7XG4gICAgICAgICAgICBhc3RUcmVlID0gY29udmVydENvZGVUb0FzdCgnL2ZpeHR1cmVzL3ByZXBlbmQtbm9kZS5qcycpO1xuICAgICAgICAgICAgZXhwZWN0ZWRBc3RUcmVlID0gY29udmVydENvZGVUb0FzdCgnL2ZpeHR1cmVzL3ByZXBlbmQtbm9kZS1leHBlY3RlZC5qcycpO1xuXG4gICAgICAgICAgICBhc3RUcmVlID0gTm9kZVV0aWxzLnBhcmVudGl6ZShhc3RUcmVlKTtcbiAgICAgICAgICAgIGV4cGVjdGVkQXN0VHJlZSA9IE5vZGVVdGlscy5wYXJlbnRpemUoZXhwZWN0ZWRBc3RUcmVlKTtcblxuICAgICAgICAgICAgTm9kZUFwcGVuZGVyLnByZXBlbmROb2RlKGFzdFRyZWUsIG5vZGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHByZXBlbmQgZ2l2ZW4gbm9kZSB0byBhIGBCbG9ja1N0YXRlbWVudGAgbm9kZSBib2R5JywgKCkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChhc3RUcmVlLCBleHBlY3RlZEFzdFRyZWUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19