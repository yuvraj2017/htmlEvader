"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var chai_1 = require("chai");
var Initializable_1 = require("../../../../src/decorators/Initializable");
describe('@initializable', function () {
    describe('initializable (initializeMethodKey: string): any', function () {
        describe('variant #1: property was initialized', function () {
            var testFunc = function testFunc() {
                var Foo = function () {
                    function Foo() {
                        _classCallCheck(this, Foo);
                    }

                    _createClass(Foo, [{
                        key: "initialize",
                        value: function initialize(property) {
                            this.property = property;
                        }
                    }]);

                    return Foo;
                }();

                tslib_1.__decorate([Initializable_1.initializable(), tslib_1.__metadata("design:type", String)], Foo.prototype, "property", void 0);
                var foo = new Foo();
                foo.initialize('baz');
                foo.property;
            };
            it('shouldn\'t throws an errors if property was initialized', function () {
                chai_1.assert.doesNotThrow(testFunc, Error);
            });
        });
        describe('variant #2: custom initialization method name is passed', function () {
            var testFunc = function testFunc() {
                var Foo = function () {
                    function Foo() {
                        _classCallCheck(this, Foo);
                    }

                    _createClass(Foo, [{
                        key: "initialize",
                        value: function initialize() {}
                    }, {
                        key: "bar",
                        value: function bar(property) {
                            this.property = property;
                        }
                    }]);

                    return Foo;
                }();

                tslib_1.__decorate([Initializable_1.initializable(), tslib_1.__metadata("design:type", String)], Foo.prototype, "property", void 0);
                var foo = new Foo();
                foo.bar('baz');
                foo.property;
            };
            it('shouldn\'t throws an errors if custom initialization method name is passed', function () {
                chai_1.assert.doesNotThrow(testFunc, Error);
            });
        });
        describe('variant #3: property didn\'t initialized', function () {
            var testFunc = function testFunc() {
                var Foo = function () {
                    function Foo() {
                        _classCallCheck(this, Foo);
                    }

                    _createClass(Foo, [{
                        key: "initialize",
                        value: function initialize(property) {}
                    }]);

                    return Foo;
                }();

                tslib_1.__decorate([Initializable_1.initializable(), tslib_1.__metadata("design:type", String)], Foo.prototype, "property", void 0);
                var foo = new Foo();
                foo.initialize('baz');
                foo.property;
            };
            it('should throws an error if property didn\'t initialized', function () {
                chai_1.assert.throws(testFunc, /Property `property` is not initialized/);
            });
        });
        describe('variant #4: `initialize` method with custom name', function () {
            var testFunc = function testFunc() {
                var Foo = function () {
                    function Foo() {
                        _classCallCheck(this, Foo);
                    }

                    _createClass(Foo, [{
                        key: "initialize",
                        value: function initialize(property) {
                            this.property = property;
                        }
                    }]);

                    return Foo;
                }();

                tslib_1.__decorate([Initializable_1.initializable('bar'), tslib_1.__metadata("design:type", String)], Foo.prototype, "property", void 0);
                var foo = new Foo();
                foo.initialize('baz');
                foo.property;
            };
            it('should throws an error if `initialize` method with custom name wasn\'t found', function () {
                chai_1.assert.throws(testFunc, /method with initialization logic not found/);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5pdGlhbGl6YWJsZS5zcGVjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGVzdC91bml0LXRlc3RzL2RlY29yYXRvcnMvaW5pdGlhbGl6YWJsZS9Jbml0aWFsaXphYmxlLnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxxQkFBOEI7QUFFOUIsOEJBQXlFO0FBR3pFLEFBQVEsU0FBQyxBQUFnQixrQkFBRTtBQUN2QixBQUFRLGFBQUMsQUFBa0Qsb0RBQUU7QUFDekQsQUFBUSxpQkFBQyxBQUFzQyx3Q0FBRTtBQUM3QyxnQkFBTSxBQUFRLFdBQWU7QUFDekIsb0JBSVcsQUFBVTs7Ozs7OzttREFBRSxBQUFnQjtBQUMvQixBQUFJLGlDQUFDLEFBQVEsV0FBRyxBQUFRLEFBQUMsQUFDN0I7QUFBQyxBQUNKOzs7Ozs7QUFMRyxvQ0FEQyxnQkFBYSxBQUFFLDZGQUNRO0FBTzVCLG9CQUFNLEFBQUcsTUFBUSxJQUFJLEFBQUcsQUFBRSxBQUFDO0FBRTNCLEFBQUcsb0JBQUMsQUFBVSxXQUFDLEFBQUssQUFBQyxBQUFDO0FBRXRCLEFBQUcsb0JBQUMsQUFBUSxBQUFDLEFBQ2pCO0FBQUMsQUFBQztBQUVGLEFBQUUsZUFBQyxBQUF5RCwyREFBRTtBQUMxRCx1QkFBTSxPQUFDLEFBQVksYUFBQyxBQUFRLFVBQUUsQUFBSyxBQUFDLEFBQUMsQUFDekM7QUFBQyxBQUFDLEFBQUMsQUFDUDtBQUFDLEFBQUMsQUFBQztBQUVILEFBQVEsaUJBQUMsQUFBeUQsMkRBQUU7QUFDaEUsZ0JBQU0sQUFBUSxXQUFlO0FBQ3pCLG9CQUlXLEFBQVU7Ozs7Ozs7cURBQ2pCLENBQUMsQUFFTSxBQUFHOzs7NENBQUUsQUFBZ0I7QUFDeEIsQUFBSSxpQ0FBQyxBQUFRLFdBQUcsQUFBUSxBQUFDLEFBQzdCO0FBQUMsQUFDSjs7Ozs7O0FBUkcsb0NBREMsZ0JBQWEsQUFBRSw2RkFDUTtBQVU1QixvQkFBTSxBQUFHLE1BQVEsSUFBSSxBQUFHLEFBQUUsQUFBQztBQUUzQixBQUFHLG9CQUFDLEFBQUcsSUFBQyxBQUFLLEFBQUMsQUFBQztBQUVmLEFBQUcsb0JBQUMsQUFBUSxBQUFDLEFBQ2pCO0FBQUMsQUFBQztBQUVGLEFBQUUsZUFBQyxBQUE0RSw4RUFBRTtBQUM3RSx1QkFBTSxPQUFDLEFBQVksYUFBQyxBQUFRLFVBQUUsQUFBSyxBQUFDLEFBQUMsQUFDekM7QUFBQyxBQUFDLEFBQUMsQUFDUDtBQUFDLEFBQUMsQUFBQztBQUVILEFBQVEsaUJBQUMsQUFBMEMsNENBQUU7QUFDakQsZ0JBQU0sQUFBUSxXQUFlO0FBQ3pCLG9CQUlXLEFBQVU7Ozs7Ozs7bURBQUUsQUFBZ0IsVUFDbkMsQ0FBQyxBQUNKOzs7Ozs7QUFKRyxvQ0FEQyxnQkFBYSxBQUFFLDZGQUNRO0FBTTVCLG9CQUFNLEFBQUcsTUFBUSxJQUFJLEFBQUcsQUFBRSxBQUFDO0FBRTNCLEFBQUcsb0JBQUMsQUFBVSxXQUFDLEFBQUssQUFBQyxBQUFDO0FBRXRCLEFBQUcsb0JBQUMsQUFBUSxBQUFDLEFBQ2pCO0FBQUMsQUFBQztBQUVGLEFBQUUsZUFBQyxBQUF3RCwwREFBRTtBQUN6RCx1QkFBTSxPQUFDLEFBQU0sT0FBQyxBQUFRLFVBQUUsQUFBd0MsQUFBQyxBQUFDLEFBQ3RFO0FBQUMsQUFBQyxBQUFDLEFBQ1A7QUFBQyxBQUFDLEFBQUM7QUFFSCxBQUFRLGlCQUFDLEFBQWtELG9EQUFFO0FBQ3pELGdCQUFNLEFBQVEsV0FBZTtBQUN6QixvQkFJVyxBQUFVOzs7Ozs7O21EQUFFLEFBQWdCO0FBQy9CLEFBQUksaUNBQUMsQUFBUSxXQUFHLEFBQVEsQUFBQyxBQUM3QjtBQUFDLEFBQ0o7Ozs7OztBQUxHLG9DQURDLGdCQUFhLGNBQUMsQUFBSyxBQUFDLG9GQUNHO0FBTzVCLG9CQUFNLEFBQUcsTUFBUSxJQUFJLEFBQUcsQUFBRSxBQUFDO0FBRTNCLEFBQUcsb0JBQUMsQUFBVSxXQUFDLEFBQUssQUFBQyxBQUFDO0FBRXRCLEFBQUcsb0JBQUMsQUFBUSxBQUFDLEFBQ2pCO0FBQUMsQUFBQztBQUVGLEFBQUUsZUFBQyxBQUE4RSxnRkFBRTtBQUMvRSx1QkFBTSxPQUFDLEFBQU0sT0FBQyxBQUFRLFVBQUUsQUFBNEMsQUFBQyxBQUFDLEFBQzFFO0FBQUMsQUFBQyxBQUFDLEFBQ1A7QUFBQyxBQUFDLEFBQUMsQUFDUDtBQUFDLEFBQUMsQUFBQyxBQUNQO0FBQUMsQUFBQyxBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnY2hhaSc7XG5cbmltcG9ydCB7IGluaXRpYWxpemFibGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvZGVjb3JhdG9ycy9Jbml0aWFsaXphYmxlJztcbmltcG9ydCB7IElJbml0aWFsaXphYmxlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2ludGVyZmFjZXMvSUluaXRpYWxpemFibGUnO1xuXG5kZXNjcmliZSgnQGluaXRpYWxpemFibGUnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ2luaXRpYWxpemFibGUgKGluaXRpYWxpemVNZXRob2RLZXk6IHN0cmluZyk6IGFueScsICgpID0+IHtcbiAgICAgICAgZGVzY3JpYmUoJ3ZhcmlhbnQgIzE6IHByb3BlcnR5IHdhcyBpbml0aWFsaXplZCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlc3RGdW5jOiAoKSA9PiB2b2lkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsYXNzIEZvbyBpbXBsZW1lbnRzIElJbml0aWFsaXphYmxlIHtcbiAgICAgICAgICAgICAgICAgICAgQGluaXRpYWxpemFibGUoKVxuICAgICAgICAgICAgICAgICAgICBwdWJsaWMgcHJvcGVydHk6IHN0cmluZztcblxuICAgICAgICAgICAgICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSAocHJvcGVydHk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IHByb3BlcnR5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZm9vOiBGb28gPSBuZXcgRm9vKCk7XG5cbiAgICAgICAgICAgICAgICBmb28uaW5pdGlhbGl6ZSgnYmF6Jyk7XG5cbiAgICAgICAgICAgICAgICBmb28ucHJvcGVydHk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkblxcJ3QgdGhyb3dzIGFuIGVycm9ycyBpZiBwcm9wZXJ0eSB3YXMgaW5pdGlhbGl6ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LmRvZXNOb3RUaHJvdyh0ZXN0RnVuYywgRXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlc2NyaWJlKCd2YXJpYW50ICMyOiBjdXN0b20gaW5pdGlhbGl6YXRpb24gbWV0aG9kIG5hbWUgaXMgcGFzc2VkJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGVzdEZ1bmM6ICgpID0+IHZvaWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xhc3MgRm9vIGltcGxlbWVudHMgSUluaXRpYWxpemFibGUge1xuICAgICAgICAgICAgICAgICAgICBAaW5pdGlhbGl6YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIHB1YmxpYyBwcm9wZXJ0eTogc3RyaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgIHB1YmxpYyBpbml0aWFsaXplICgpOiB2b2lkIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHB1YmxpYyBiYXIgKHByb3BlcnR5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydHkgPSBwcm9wZXJ0eTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGZvbzogRm9vID0gbmV3IEZvbygpO1xuXG4gICAgICAgICAgICAgICAgZm9vLmJhcignYmF6Jyk7XG5cbiAgICAgICAgICAgICAgICBmb28ucHJvcGVydHk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkblxcJ3QgdGhyb3dzIGFuIGVycm9ycyBpZiBjdXN0b20gaW5pdGlhbGl6YXRpb24gbWV0aG9kIG5hbWUgaXMgcGFzc2VkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFzc2VydC5kb2VzTm90VGhyb3codGVzdEZ1bmMsIEVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZSgndmFyaWFudCAjMzogcHJvcGVydHkgZGlkblxcJ3QgaW5pdGlhbGl6ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZXN0RnVuYzogKCkgPT4gdm9pZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjbGFzcyBGb28gaW1wbGVtZW50cyBJSW5pdGlhbGl6YWJsZSB7XG4gICAgICAgICAgICAgICAgICAgIEBpbml0aWFsaXphYmxlKClcbiAgICAgICAgICAgICAgICAgICAgcHVibGljIHByb3BlcnR5OiBzdHJpbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgcHVibGljIGluaXRpYWxpemUgKHByb3BlcnR5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGZvbzogRm9vID0gbmV3IEZvbygpO1xuXG4gICAgICAgICAgICAgICAgZm9vLmluaXRpYWxpemUoJ2JheicpO1xuXG4gICAgICAgICAgICAgICAgZm9vLnByb3BlcnR5O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaXQoJ3Nob3VsZCB0aHJvd3MgYW4gZXJyb3IgaWYgcHJvcGVydHkgZGlkblxcJ3QgaW5pdGlhbGl6ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LnRocm93cyh0ZXN0RnVuYywgL1Byb3BlcnR5IGBwcm9wZXJ0eWAgaXMgbm90IGluaXRpYWxpemVkLyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoJ3ZhcmlhbnQgIzQ6IGBpbml0aWFsaXplYCBtZXRob2Qgd2l0aCBjdXN0b20gbmFtZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlc3RGdW5jOiAoKSA9PiB2b2lkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsYXNzIEZvbyB7XG4gICAgICAgICAgICAgICAgICAgIEBpbml0aWFsaXphYmxlKCdiYXInKVxuICAgICAgICAgICAgICAgICAgICBwdWJsaWMgcHJvcGVydHk6IHN0cmluZztcblxuICAgICAgICAgICAgICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSAocHJvcGVydHk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IHByb3BlcnR5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZm9vOiBGb28gPSBuZXcgRm9vKCk7XG5cbiAgICAgICAgICAgICAgICBmb28uaW5pdGlhbGl6ZSgnYmF6Jyk7XG5cbiAgICAgICAgICAgICAgICBmb28ucHJvcGVydHk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHRocm93cyBhbiBlcnJvciBpZiBgaW5pdGlhbGl6ZWAgbWV0aG9kIHdpdGggY3VzdG9tIG5hbWUgd2FzblxcJ3QgZm91bmQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LnRocm93cyh0ZXN0RnVuYywgL21ldGhvZCB3aXRoIGluaXRpYWxpemF0aW9uIGxvZ2ljIG5vdCBmb3VuZC8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=