"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var chai_1 = require("chai");
var NoCustomNodes_1 = require("../../../../../src/options/presets/NoCustomNodes");
var readFileAsString_1 = require("../../../../helpers/readFileAsString");
var JavaScriptObfuscator_1 = require("../../../../../src/JavaScriptObfuscator");
describe('MemberExpressionTransformer', function () {
    describe('transformation of member expression node with dot notation', function () {
        describe('`stringArray` option is disabled', function () {
            var regExp = /var *test *= *console\['log'\];/;
            var obfuscatedCode = void 0;
            before(function () {
                var code = readFileAsString_1.readFileAsString(__dirname + '/fixtures/dot-notation-call.js');
                var obfuscationResult = JavaScriptObfuscator_1.JavaScriptObfuscator.obfuscate(code, Object.assign({}, NoCustomNodes_1.NO_CUSTOM_NODES_PRESET));
                obfuscatedCode = obfuscationResult.getObfuscatedCode();
            });
            it('should replace member expression dot notation call with literal value', function () {
                chai_1.assert.match(obfuscatedCode, regExp);
            });
        });
        describe('`stringArray` option is enabled', function () {
            var stringArrayRegExp = /var *_0x([a-f0-9]){4} *= *\['log'\];/;
            var stringArrayCallRegExp = /var *test *= *console\[_0x([a-f0-9]){4}\('0x0'\)\];/;
            var obfuscatedCode = void 0;
            before(function () {
                var code = readFileAsString_1.readFileAsString(__dirname + '/fixtures/dot-notation-call.js');
                var obfuscationResult = JavaScriptObfuscator_1.JavaScriptObfuscator.obfuscate(code, Object.assign({}, NoCustomNodes_1.NO_CUSTOM_NODES_PRESET, { stringArray: true, stringArrayThreshold: 1 }));
                obfuscatedCode = obfuscationResult.getObfuscatedCode();
            });
            it('should add member expression identifier to string array', function () {
                chai_1.assert.match(obfuscatedCode, stringArrayRegExp);
            });
            it('should replace member expression dot notation call with call to string array', function () {
                chai_1.assert.match(obfuscatedCode, stringArrayCallRegExp);
            });
        });
    });
    describe('transformation of member expression node with square brackets', function () {
        describe('variant #1: square brackets literal ', function () {
            var stringArrayRegExp = /var *_0x([a-f0-9]){4} *= *\['log'\];/;
            var stringArrayCallRegExp = /var *test *= *console\[_0x([a-f0-9]){4}\('0x0'\)\];/;
            var obfuscatedCode = void 0;
            before(function () {
                var code = readFileAsString_1.readFileAsString(__dirname + '/fixtures/square-brackets-call.js');
                var obfuscationResult = JavaScriptObfuscator_1.JavaScriptObfuscator.obfuscate(code, Object.assign({}, NoCustomNodes_1.NO_CUSTOM_NODES_PRESET, { stringArray: true, stringArrayThreshold: 1 }));
                obfuscatedCode = obfuscationResult.getObfuscatedCode();
            });
            it('should add member expression square brackets literal to string array', function () {
                chai_1.assert.match(obfuscatedCode, stringArrayRegExp);
            });
            it('should replace member expression square brackets identifier with call to string array', function () {
                chai_1.assert.match(obfuscatedCode, stringArrayCallRegExp);
            });
        });
        describe('variant #2: square brackets identifier', function () {
            var regExp = /var *test *= *console\[identifier\];/;
            var obfuscatedCode = void 0;
            before(function () {
                var code = readFileAsString_1.readFileAsString(__dirname + '/fixtures/square-brackets-with-identifier-call.js');
                var obfuscationResult = JavaScriptObfuscator_1.JavaScriptObfuscator.obfuscate(code, Object.assign({}, NoCustomNodes_1.NO_CUSTOM_NODES_PRESET));
                obfuscatedCode = obfuscationResult.getObfuscatedCode();
            });
            it('should ignore square brackets call with identifier value', function () {
                chai_1.assert.match(obfuscatedCode, regExp);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVtYmVyRXhwcmVzc2lvblRyYW5zZm9ybWVyLnNwZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZXN0L2Z1bmN0aW9uYWwtdGVzdHMvbm9kZS10cmFuc2Zvcm1lcnMvY29udmVydGluZy10cmFuc2Zvcm1lcnMvbWVtYmVyLWV4cHJlc3Npb24tdHJhbnNmb3JtZXIvTWVtYmVyRXhwcmVzc2lvblRyYW5zZm9ybWVyLnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUJBQThCO0FBSTlCLDhCQUEwRjtBQUUxRixpQ0FBd0U7QUFFeEUscUNBQStFO0FBRS9FLEFBQVEsU0FBQyxBQUE2QiwrQkFBRTtBQUNwQyxBQUFRLGFBQUMsQUFBNEQsOERBQUU7QUFDbkUsQUFBUSxpQkFBQyxBQUFrQyxvQ0FBRTtBQUN6QyxnQkFBTSxBQUFNLFNBQVcsQUFBaUMsQUFBQztBQUV6RCxnQkFBSSxBQUFzQixBQUFDO0FBRTNCLEFBQU0sbUJBQUM7QUFDSCxvQkFBTSxBQUFJLE9BQVcsbUJBQWdCLGlCQUFDLEFBQVMsWUFBRyxBQUFnQyxBQUFDLEFBQUM7QUFDcEYsb0JBQU0sQUFBaUIsb0JBQXVCLHVCQUFvQixxQkFBQyxBQUFTLFVBQ3hFLEFBQUksd0JBRUcsZ0JBQXNCLEFBRWhDLEFBQUM7QUFFRixBQUFjLGlDQUFHLEFBQWlCLGtCQUFDLEFBQWlCLEFBQUUsQUFBQyxBQUMzRDtBQUFDLEFBQUMsQUFBQztBQUVILEFBQUUsZUFBQyxBQUF1RSx5RUFBRTtBQUN4RSx1QkFBTSxPQUFDLEFBQUssTUFBQyxBQUFjLGdCQUFHLEFBQU0sQUFBQyxBQUFDLEFBQzFDO0FBQUMsQUFBQyxBQUFDLEFBQ1A7QUFBQyxBQUFDLEFBQUM7QUFFSCxBQUFRLGlCQUFDLEFBQWlDLG1DQUFFO0FBQ3hDLGdCQUFNLEFBQWlCLG9CQUFXLEFBQXNDLEFBQUM7QUFDekUsZ0JBQU0sQUFBcUIsd0JBQVcsQUFBcUQsQUFBQztBQUU1RixnQkFBSSxBQUFzQixBQUFDO0FBRTNCLEFBQU0sbUJBQUM7QUFDSCxvQkFBTSxBQUFJLE9BQVcsbUJBQWdCLGlCQUFDLEFBQVMsWUFBRyxBQUFnQyxBQUFDLEFBQUM7QUFDcEYsb0JBQU0sQUFBaUIsb0JBQXVCLHVCQUFvQixxQkFBQyxBQUFTLFVBQ3hFLEFBQUksd0JBRUcsZ0JBQXNCLDBCQUN6QixBQUFXLGFBQUUsQUFBSSxNQUNqQixBQUFvQixzQkFBRSxBQUFDLEFBRTlCLEFBQUM7QUFFRixBQUFjLGlDQUFHLEFBQWlCLGtCQUFDLEFBQWlCLEFBQUUsQUFBQyxBQUMzRDtBQUFDLEFBQUMsQUFBQztBQUVILEFBQUUsZUFBQyxBQUF5RCwyREFBRTtBQUMxRCx1QkFBTSxPQUFDLEFBQUssTUFBQyxBQUFjLGdCQUFFLEFBQWlCLEFBQUMsQUFBQyxBQUNwRDtBQUFDLEFBQUMsQUFBQztBQUVILEFBQUUsZUFBQyxBQUE4RSxnRkFBRTtBQUMvRSx1QkFBTSxPQUFDLEFBQUssTUFBQyxBQUFjLGdCQUFFLEFBQXFCLEFBQUMsQUFBQyxBQUN4RDtBQUFDLEFBQUMsQUFBQyxBQUNQO0FBQUMsQUFBQyxBQUFDLEFBQ1A7QUFBQyxBQUFDLEFBQUM7QUFFSCxBQUFRLGFBQUMsQUFBK0QsaUVBQUU7QUFDdEUsQUFBUSxpQkFBQyxBQUFzQyx3Q0FBRTtBQUM3QyxnQkFBTSxBQUFpQixvQkFBVyxBQUFzQyxBQUFDO0FBQ3pFLGdCQUFNLEFBQXFCLHdCQUFXLEFBQXFELEFBQUM7QUFFNUYsZ0JBQUksQUFBc0IsQUFBQztBQUUzQixBQUFNLG1CQUFDO0FBQ0gsb0JBQU0sQUFBSSxPQUFXLG1CQUFnQixpQkFBQyxBQUFTLFlBQUcsQUFBbUMsQUFBQyxBQUFDO0FBQ3ZGLG9CQUFNLEFBQWlCLG9CQUF1Qix1QkFBb0IscUJBQUMsQUFBUyxVQUN4RSxBQUFJLHdCQUVHLGdCQUFzQiwwQkFDekIsQUFBVyxhQUFFLEFBQUksTUFDakIsQUFBb0Isc0JBQUUsQUFBQyxBQUU5QixBQUFDO0FBRUYsQUFBYyxpQ0FBRyxBQUFpQixrQkFBQyxBQUFpQixBQUFFLEFBQUMsQUFDM0Q7QUFBQyxBQUFDLEFBQUM7QUFFSCxBQUFFLGVBQUMsQUFBc0Usd0VBQUU7QUFDdkUsdUJBQU0sT0FBQyxBQUFLLE1BQUMsQUFBYyxnQkFBRSxBQUFpQixBQUFDLEFBQUMsQUFDcEQ7QUFBQyxBQUFDLEFBQUM7QUFFSCxBQUFFLGVBQUMsQUFBdUYseUZBQUU7QUFDeEYsdUJBQU0sT0FBQyxBQUFLLE1BQUMsQUFBYyxnQkFBRSxBQUFxQixBQUFDLEFBQUMsQUFDeEQ7QUFBQyxBQUFDLEFBQUMsQUFDUDtBQUFDLEFBQUMsQUFBQztBQUVILEFBQVEsaUJBQUMsQUFBd0MsMENBQUU7QUFDL0MsZ0JBQU0sQUFBTSxTQUFXLEFBQXNDLEFBQUM7QUFFOUQsZ0JBQUksQUFBc0IsQUFBQztBQUUzQixBQUFNLG1CQUFDO0FBQ0gsb0JBQU0sQUFBSSxPQUFXLG1CQUFnQixpQkFBQyxBQUFTLFlBQUcsQUFBbUQsQUFBQyxBQUFDO0FBQ3ZHLG9CQUFNLEFBQWlCLG9CQUF1Qix1QkFBb0IscUJBQUMsQUFBUyxVQUN4RSxBQUFJLHdCQUVHLGdCQUFzQixBQUVoQyxBQUFDO0FBRUYsQUFBYyxpQ0FBRyxBQUFpQixrQkFBQyxBQUFpQixBQUFFLEFBQUMsQUFDM0Q7QUFBQyxBQUFDLEFBQUM7QUFFSCxBQUFFLGVBQUMsQUFBMEQsNERBQUU7QUFDM0QsdUJBQU0sT0FBQyxBQUFLLE1BQUMsQUFBYyxnQkFBRSxBQUFNLEFBQUMsQUFBQyxBQUN6QztBQUFDLEFBQUMsQUFBQyxBQUNQO0FBQUMsQUFBQyxBQUFDLEFBQ1A7QUFBQyxBQUFDLEFBQUMsQUFDUDtBQUFDLEFBQUMsQUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2VydCB9IGZyb20gJ2NoYWknO1xuXG5pbXBvcnQgeyBJT2JmdXNjYXRpb25SZXN1bHQgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9zcmMvaW50ZXJmYWNlcy9JT2JmdXNjYXRpb25SZXN1bHQnO1xuXG5pbXBvcnQgeyBOT19DVVNUT01fTk9ERVNfUFJFU0VUIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc3JjL29wdGlvbnMvcHJlc2V0cy9Ob0N1c3RvbU5vZGVzJztcblxuaW1wb3J0IHsgcmVhZEZpbGVBc1N0cmluZyB9IGZyb20gJy4uLy4uLy4uLy4uL2hlbHBlcnMvcmVhZEZpbGVBc1N0cmluZyc7XG5cbmltcG9ydCB7IEphdmFTY3JpcHRPYmZ1c2NhdG9yIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc3JjL0phdmFTY3JpcHRPYmZ1c2NhdG9yJztcblxuZGVzY3JpYmUoJ01lbWJlckV4cHJlc3Npb25UcmFuc2Zvcm1lcicsICgpID0+IHtcbiAgICBkZXNjcmliZSgndHJhbnNmb3JtYXRpb24gb2YgbWVtYmVyIGV4cHJlc3Npb24gbm9kZSB3aXRoIGRvdCBub3RhdGlvbicsICgpID0+IHtcbiAgICAgICAgZGVzY3JpYmUoJ2BzdHJpbmdBcnJheWAgb3B0aW9uIGlzIGRpc2FibGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVnRXhwOiBSZWdFeHAgPSAvdmFyICp0ZXN0ICo9ICpjb25zb2xlXFxbJ2xvZydcXF07LztcblxuICAgICAgICAgICAgbGV0IG9iZnVzY2F0ZWRDb2RlOiBzdHJpbmc7XG5cbiAgICAgICAgICAgIGJlZm9yZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29kZTogc3RyaW5nID0gcmVhZEZpbGVBc1N0cmluZyhfX2Rpcm5hbWUgKyAnL2ZpeHR1cmVzL2RvdC1ub3RhdGlvbi1jYWxsLmpzJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2JmdXNjYXRpb25SZXN1bHQ6IElPYmZ1c2NhdGlvblJlc3VsdCA9IEphdmFTY3JpcHRPYmZ1c2NhdG9yLm9iZnVzY2F0ZShcbiAgICAgICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uTk9fQ1VTVE9NX05PREVTX1BSRVNFVFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRDb2RlID0gb2JmdXNjYXRpb25SZXN1bHQuZ2V0T2JmdXNjYXRlZENvZGUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJlcGxhY2UgbWVtYmVyIGV4cHJlc3Npb24gZG90IG5vdGF0aW9uIGNhbGwgd2l0aCBsaXRlcmFsIHZhbHVlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFzc2VydC5tYXRjaChvYmZ1c2NhdGVkQ29kZSwgIHJlZ0V4cCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoJ2BzdHJpbmdBcnJheWAgb3B0aW9uIGlzIGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdBcnJheVJlZ0V4cDogUmVnRXhwID0gL3ZhciAqXzB4KFthLWYwLTldKXs0fSAqPSAqXFxbJ2xvZydcXF07LztcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ0FycmF5Q2FsbFJlZ0V4cDogUmVnRXhwID0gL3ZhciAqdGVzdCAqPSAqY29uc29sZVxcW18weChbYS1mMC05XSl7NH1cXCgnMHgwJ1xcKVxcXTsvO1xuXG4gICAgICAgICAgICBsZXQgb2JmdXNjYXRlZENvZGU6IHN0cmluZztcblxuICAgICAgICAgICAgYmVmb3JlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2RlOiBzdHJpbmcgPSByZWFkRmlsZUFzU3RyaW5nKF9fZGlybmFtZSArICcvZml4dHVyZXMvZG90LW5vdGF0aW9uLWNhbGwuanMnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvYmZ1c2NhdGlvblJlc3VsdDogSU9iZnVzY2F0aW9uUmVzdWx0ID0gSmF2YVNjcmlwdE9iZnVzY2F0b3Iub2JmdXNjYXRlKFxuICAgICAgICAgICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5OT19DVVNUT01fTk9ERVNfUFJFU0VULFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nQXJyYXk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdBcnJheVRocmVzaG9sZDogMVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRDb2RlID0gb2JmdXNjYXRpb25SZXN1bHQuZ2V0T2JmdXNjYXRlZENvZGUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkIGFkZCBtZW1iZXIgZXhwcmVzc2lvbiBpZGVudGlmaWVyIHRvIHN0cmluZyBhcnJheScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NlcnQubWF0Y2gob2JmdXNjYXRlZENvZGUsIHN0cmluZ0FycmF5UmVnRXhwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJlcGxhY2UgbWVtYmVyIGV4cHJlc3Npb24gZG90IG5vdGF0aW9uIGNhbGwgd2l0aCBjYWxsIHRvIHN0cmluZyBhcnJheScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NlcnQubWF0Y2gob2JmdXNjYXRlZENvZGUsIHN0cmluZ0FycmF5Q2FsbFJlZ0V4cCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgndHJhbnNmb3JtYXRpb24gb2YgbWVtYmVyIGV4cHJlc3Npb24gbm9kZSB3aXRoIHNxdWFyZSBicmFja2V0cycsICgpID0+IHtcbiAgICAgICAgZGVzY3JpYmUoJ3ZhcmlhbnQgIzE6IHNxdWFyZSBicmFja2V0cyBsaXRlcmFsICcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ0FycmF5UmVnRXhwOiBSZWdFeHAgPSAvdmFyICpfMHgoW2EtZjAtOV0pezR9ICo9ICpcXFsnbG9nJ1xcXTsvO1xuICAgICAgICAgICAgY29uc3Qgc3RyaW5nQXJyYXlDYWxsUmVnRXhwOiBSZWdFeHAgPSAvdmFyICp0ZXN0ICo9ICpjb25zb2xlXFxbXzB4KFthLWYwLTldKXs0fVxcKCcweDAnXFwpXFxdOy87XG5cbiAgICAgICAgICAgIGxldCBvYmZ1c2NhdGVkQ29kZTogc3RyaW5nO1xuXG4gICAgICAgICAgICBiZWZvcmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvZGU6IHN0cmluZyA9IHJlYWRGaWxlQXNTdHJpbmcoX19kaXJuYW1lICsgJy9maXh0dXJlcy9zcXVhcmUtYnJhY2tldHMtY2FsbC5qcycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iZnVzY2F0aW9uUmVzdWx0OiBJT2JmdXNjYXRpb25SZXN1bHQgPSBKYXZhU2NyaXB0T2JmdXNjYXRvci5vYmZ1c2NhdGUoXG4gICAgICAgICAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLk5PX0NVU1RPTV9OT0RFU19QUkVTRVQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdBcnJheTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0FycmF5VGhyZXNob2xkOiAxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgb2JmdXNjYXRlZENvZGUgPSBvYmZ1c2NhdGlvblJlc3VsdC5nZXRPYmZ1c2NhdGVkQ29kZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KCdzaG91bGQgYWRkIG1lbWJlciBleHByZXNzaW9uIHNxdWFyZSBicmFja2V0cyBsaXRlcmFsIHRvIHN0cmluZyBhcnJheScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NlcnQubWF0Y2gob2JmdXNjYXRlZENvZGUsIHN0cmluZ0FycmF5UmVnRXhwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJlcGxhY2UgbWVtYmVyIGV4cHJlc3Npb24gc3F1YXJlIGJyYWNrZXRzIGlkZW50aWZpZXIgd2l0aCBjYWxsIHRvIHN0cmluZyBhcnJheScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NlcnQubWF0Y2gob2JmdXNjYXRlZENvZGUsIHN0cmluZ0FycmF5Q2FsbFJlZ0V4cCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoJ3ZhcmlhbnQgIzI6IHNxdWFyZSBicmFja2V0cyBpZGVudGlmaWVyJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVnRXhwOiBSZWdFeHAgPSAvdmFyICp0ZXN0ICo9ICpjb25zb2xlXFxbaWRlbnRpZmllclxcXTsvO1xuXG4gICAgICAgICAgICBsZXQgb2JmdXNjYXRlZENvZGU6IHN0cmluZztcblxuICAgICAgICAgICAgYmVmb3JlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2RlOiBzdHJpbmcgPSByZWFkRmlsZUFzU3RyaW5nKF9fZGlybmFtZSArICcvZml4dHVyZXMvc3F1YXJlLWJyYWNrZXRzLXdpdGgtaWRlbnRpZmllci1jYWxsLmpzJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2JmdXNjYXRpb25SZXN1bHQ6IElPYmZ1c2NhdGlvblJlc3VsdCA9IEphdmFTY3JpcHRPYmZ1c2NhdG9yLm9iZnVzY2F0ZShcbiAgICAgICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uTk9fQ1VTVE9NX05PREVTX1BSRVNFVFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRDb2RlID0gb2JmdXNjYXRpb25SZXN1bHQuZ2V0T2JmdXNjYXRlZENvZGUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdCgnc2hvdWxkIGlnbm9yZSBzcXVhcmUgYnJhY2tldHMgY2FsbCB3aXRoIGlkZW50aWZpZXIgdmFsdWUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0Lm1hdGNoKG9iZnVzY2F0ZWRDb2RlLCByZWdFeHApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=