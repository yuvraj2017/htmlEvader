"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var inversify_1 = require("inversify");
var ServiceIdentifiers_1 = require("../../container/ServiceIdentifiers");
var Initializable_1 = require("../../decorators/Initializable");
var AbstractCustomNode_1 = require("../AbstractCustomNode");
var Nodes_1 = require("../../node/Nodes");
var NodeUtils_1 = require("../../node/NodeUtils");
var BlockStatementControlFlowFlatteningNode = function (_AbstractCustomNode_) {
    _inherits(BlockStatementControlFlowFlatteningNode, _AbstractCustomNode_);

    function BlockStatementControlFlowFlatteningNode(randomGenerator, options) {
        _classCallCheck(this, BlockStatementControlFlowFlatteningNode);

        var _this = _possibleConstructorReturn(this, (BlockStatementControlFlowFlatteningNode.__proto__ || Object.getPrototypeOf(BlockStatementControlFlowFlatteningNode)).call(this, options));

        _this.randomGenerator = randomGenerator;
        return _this;
    }

    _createClass(BlockStatementControlFlowFlatteningNode, [{
        key: "initialize",
        value: function initialize(blockStatementBody, shuffledKeys, originalKeysIndexesInShuffledArray) {
            this.blockStatementBody = blockStatementBody;
            this.shuffledKeys = shuffledKeys;
            this.originalKeysIndexesInShuffledArray = originalKeysIndexesInShuffledArray;
        }
    }, {
        key: "getNodeStructure",
        value: function getNodeStructure() {
            var _this2 = this;

            var controllerIdentifierName = this.randomGenerator.getRandomString(3);
            var indexIdentifierName = this.randomGenerator.getRandomString(3);
            var structure = Nodes_1.Nodes.getBlockStatementNode([Nodes_1.Nodes.getVariableDeclarationNode([Nodes_1.Nodes.getVariableDeclaratorNode(Nodes_1.Nodes.getIdentifierNode(controllerIdentifierName), Nodes_1.Nodes.getCallExpressionNode(Nodes_1.Nodes.getMemberExpressionNode(Nodes_1.Nodes.getLiteralNode(this.originalKeysIndexesInShuffledArray.join('|')), Nodes_1.Nodes.getIdentifierNode('split')), [Nodes_1.Nodes.getLiteralNode('|')])), Nodes_1.Nodes.getVariableDeclaratorNode(Nodes_1.Nodes.getIdentifierNode(indexIdentifierName), Nodes_1.Nodes.getLiteralNode(0))]), Nodes_1.Nodes.getWhileStatementNode(Nodes_1.Nodes.getLiteralNode(true), Nodes_1.Nodes.getBlockStatementNode([Nodes_1.Nodes.getSwitchStatementNode(Nodes_1.Nodes.getMemberExpressionNode(Nodes_1.Nodes.getIdentifierNode(controllerIdentifierName), Nodes_1.Nodes.getUpdateExpressionNode('++', Nodes_1.Nodes.getIdentifierNode(indexIdentifierName)), true), this.shuffledKeys.map(function (key, index) {
                return Nodes_1.Nodes.getSwitchCaseNode(Nodes_1.Nodes.getLiteralNode(String(index)), [_this2.blockStatementBody[key], Nodes_1.Nodes.getContinueStatement()]);
            })), Nodes_1.Nodes.getBreakStatement()]))]);
            NodeUtils_1.NodeUtils.parentize(structure);
            return [structure];
        }
    }]);

    return BlockStatementControlFlowFlatteningNode;
}(AbstractCustomNode_1.AbstractCustomNode);
tslib_1.__decorate([Initializable_1.initializable(), tslib_1.__metadata("design:type", Array)], BlockStatementControlFlowFlatteningNode.prototype, "blockStatementBody", void 0);
tslib_1.__decorate([Initializable_1.initializable(), tslib_1.__metadata("design:type", Array)], BlockStatementControlFlowFlatteningNode.prototype, "originalKeysIndexesInShuffledArray", void 0);
tslib_1.__decorate([Initializable_1.initializable(), tslib_1.__metadata("design:type", Array)], BlockStatementControlFlowFlatteningNode.prototype, "shuffledKeys", void 0);
BlockStatementControlFlowFlatteningNode = tslib_1.__decorate([inversify_1.injectable(), tslib_1.__param(0, inversify_1.inject(ServiceIdentifiers_1.ServiceIdentifiers.IRandomGenerator)), tslib_1.__param(1, inversify_1.inject(ServiceIdentifiers_1.ServiceIdentifiers.IOptions)), tslib_1.__metadata("design:paramtypes", [Object, Object])], BlockStatementControlFlowFlatteningNode);
exports.BlockStatementControlFlowFlatteningNode = BlockStatementControlFlowFlatteningNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmxvY2tTdGF0ZW1lbnRDb250cm9sRmxvd0ZsYXR0ZW5pbmdOb2RlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2N1c3RvbS1ub2Rlcy9jb250cm9sLWZsb3ctZmxhdHRlbmluZy1ub2Rlcy9CbG9ja1N0YXRlbWVudENvbnRyb2xGbG93RmxhdHRlbmluZ05vZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsMEJBQStDO0FBQy9DLG1DQUF3RTtBQVN4RSw4QkFBK0Q7QUFFL0QsbUNBQTJEO0FBQzNELHNCQUF5QztBQUN6QywwQkFBaUQ7QUFHakQ7QUFBQSxBQUFhLEFBQXVDLEFBQUM7O0FBNEJqRCxxREFDaUQsQUFBaUMsaUJBQ3pDLEFBQWlCO0FBRXRELEFBQUs7O3NMQUFDLEFBQU8sQUFBQyxBQUFDOztBQUVmLEFBQUksY0FBQyxBQUFlLGtCQUFHLEFBQWUsQUFBQyxBQUMzQzs7QUFBQyxBQU9NLEFBQVU7Ozs7bUNBQ2IsQUFBc0Msb0JBQ3RDLEFBQXNCLGNBQ3RCLEFBQTRDO0FBRTVDLEFBQUksaUJBQUMsQUFBa0IscUJBQUcsQUFBa0IsQUFBQztBQUM3QyxBQUFJLGlCQUFDLEFBQVksZUFBRyxBQUFZLEFBQUM7QUFDakMsQUFBSSxpQkFBQyxBQUFrQyxxQ0FBRyxBQUFrQyxBQUFDLEFBQ2pGO0FBQUMsQUFLUyxBQUFnQjs7Ozs7O0FBQ3RCLGdCQUFNLEFBQXdCLDJCQUFXLEFBQUksS0FBQyxBQUFlLGdCQUFDLEFBQWUsZ0JBQUMsQUFBQyxBQUFDLEFBQUM7QUFDakYsZ0JBQU0sQUFBbUIsc0JBQVcsQUFBSSxLQUFDLEFBQWUsZ0JBQUMsQUFBZSxnQkFBQyxBQUFDLEFBQUMsQUFBQztBQUM1RSxnQkFBTSxBQUFTLFlBQTBCLFFBQUssTUFBQyxBQUFxQix1QkFDaEUsUUFBSyxNQUFDLEFBQTBCLDJCQUFDLENBQzdCLFFBQUssTUFBQyxBQUF5QiwwQkFDM0IsUUFBSyxNQUFDLEFBQWlCLGtCQUFDLEFBQXdCLEFBQUMsMkJBQ2pELFFBQUssTUFBQyxBQUFxQixzQkFDdkIsUUFBSyxNQUFDLEFBQXVCLHdCQUN6QixRQUFLLE1BQUMsQUFBYyxlQUNoQixBQUFJLEtBQUMsQUFBa0MsbUNBQUMsQUFBSSxLQUFDLEFBQUcsQUFBQyxBQUNwRCxPQUNELFFBQUssTUFBQyxBQUFpQixrQkFBQyxBQUFPLEFBQUMsQUFDbkMsV0FDRCxDQUNJLFFBQUssTUFBQyxBQUFjLGVBQUMsQUFBRyxBQUFDLEFBQzVCLEFBQ0osQUFDSixTQUNELFFBQUssTUFBQyxBQUF5QiwwQkFDM0IsUUFBSyxNQUFDLEFBQWlCLGtCQUFDLEFBQW1CLEFBQUMsc0JBQzVDLFFBQUssTUFBQyxBQUFjLGVBQUMsQUFBQyxBQUFDLEFBQzFCLEFBQ0osQUFBQyxlQUNHLE1BQUMsQUFBcUIsc0JBQ3ZCLFFBQUssTUFBQyxBQUFjLGVBQUMsQUFBSSxBQUFDLGVBQ3JCLE1BQUMsQUFBcUIsK0JBQ2xCLE1BQUMsQUFBc0IsdUJBQ3hCLFFBQUssTUFBQyxBQUF1Qix3QkFDekIsUUFBSyxNQUFDLEFBQWlCLGtCQUFDLEFBQXdCLEFBQUMsMkJBQ2pELFFBQUssTUFBQyxBQUF1Qix3QkFDekIsQUFBSSxNQUNKLFFBQUssTUFBQyxBQUFpQixrQkFBQyxBQUFtQixBQUFDLEFBQy9DLHVCQUNELEFBQUksQUFDUCxZQUNJLEFBQVksYUFBQyxBQUFHLElBQUMsVUFBQyxBQUFXLEtBQUUsQUFBYTtBQUM3QyxBQUFNLHVCQUFDLFFBQUssTUFBQyxBQUFpQixrQkFDMUIsUUFBSyxNQUFDLEFBQWMsZUFBQyxBQUFNLE9BQUMsQUFBSyxBQUFDLEFBQUMsU0FDbkMsQ0FDSSxBQUFJLE9BQUMsQUFBa0IsbUJBQUMsQUFBRyxBQUFDLE1BQzVCLFFBQUssTUFBQyxBQUFvQixBQUFFLEFBQy9CLEFBQ0osQUFBQyxBQUNOO0FBQUMsQUFBQyxBQUNMLGFBVEcsQUFBSSxDQVRSLENBRHdCLEVBb0J4QixRQUFLLE1BQUMsQUFBaUIsQUFBRSxBQUM1QixBQUFDLEFBQ0wsQUFDSixBQUFDLEFBQUMsb0JBdkJLLENBRkosQ0FyQmlFO0FBZ0RyRSx3QkFBUyxVQUFDLEFBQVMsVUFBQyxBQUFTLEFBQUMsQUFBQztBQUUvQixBQUFNLG1CQUFDLENBQUMsQUFBUyxBQUFDLEFBQUMsQUFDdkI7QUFBQyxBQUNKOzs7O0VBOUc0RCxxQkFBa0I7QUFLM0Usb0JBREMsZ0JBQWEsQUFBRSwwSUFDK0I7QUFNL0Msb0JBREMsZ0JBQWEsQUFBRSwwSkFDcUM7QUFXckQsb0JBREMsZ0JBQWEsQUFBRSxvSUFDZTtBQXRCdEIsQUFBdUMsOERBRG5ELFlBQVUsQUFBRSxjQThCSixtQkFBQSxZQUFNLE9BQUMscUJBQWtCLG1CQUFDLEFBQWdCLEFBQUMsb0JBQzNDLG1CQUFBLFlBQU0sT0FBQyxxQkFBa0IsbUJBQUMsQUFBUSxBQUFDLHdFQTlCL0IsQUFBdUMsQUE4R25EO0FBOUdZLGtEQUF1QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluamVjdGFibGUsIGluamVjdCB9IGZyb20gJ2ludmVyc2lmeSc7XG5pbXBvcnQgeyBTZXJ2aWNlSWRlbnRpZmllcnMgfSBmcm9tICcuLi8uLi9jb250YWluZXIvU2VydmljZUlkZW50aWZpZXJzJztcblxuaW1wb3J0ICogYXMgRVNUcmVlIGZyb20gJ2VzdHJlZSc7XG5cbmltcG9ydCB7IFRTdGF0ZW1lbnQgfSBmcm9tICcuLi8uLi90eXBlcy9ub2RlL1RTdGF0ZW1lbnQnO1xuXG5pbXBvcnQgeyBJT3B0aW9ucyB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvb3B0aW9ucy9JT3B0aW9ucyc7XG5pbXBvcnQgeyBJUmFuZG9tR2VuZXJhdG9yIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy91dGlscy9JUmFuZG9tR2VuZXJhdG9yJztcblxuaW1wb3J0IHsgaW5pdGlhbGl6YWJsZSB9IGZyb20gJy4uLy4uL2RlY29yYXRvcnMvSW5pdGlhbGl6YWJsZSc7XG5cbmltcG9ydCB7IEFic3RyYWN0Q3VzdG9tTm9kZSB9IGZyb20gJy4uL0Fic3RyYWN0Q3VzdG9tTm9kZSc7XG5pbXBvcnQgeyBOb2RlcyB9IGZyb20gJy4uLy4uL25vZGUvTm9kZXMnO1xuaW1wb3J0IHsgTm9kZVV0aWxzIH0gZnJvbSAnLi4vLi4vbm9kZS9Ob2RlVXRpbHMnO1xuXG5AaW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQmxvY2tTdGF0ZW1lbnRDb250cm9sRmxvd0ZsYXR0ZW5pbmdOb2RlIGV4dGVuZHMgQWJzdHJhY3RDdXN0b21Ob2RlIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7RVNUcmVlLlN0YXRlbWVudFtdfVxuICAgICAqL1xuICAgIEBpbml0aWFsaXphYmxlKClcbiAgICBwcml2YXRlIGJsb2NrU3RhdGVtZW50Qm9keTogRVNUcmVlLlN0YXRlbWVudFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcltdfVxuICAgICAqL1xuICAgIEBpbml0aWFsaXphYmxlKClcbiAgICBwcml2YXRlIG9yaWdpbmFsS2V5c0luZGV4ZXNJblNodWZmbGVkQXJyYXk6IG51bWJlcltdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0lSYW5kb21HZW5lcmF0b3J9XG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkb25seSByYW5kb21HZW5lcmF0b3I6IElSYW5kb21HZW5lcmF0b3I7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyW119XG4gICAgICovXG4gICAgQGluaXRpYWxpemFibGUoKVxuICAgIHByaXZhdGUgc2h1ZmZsZWRLZXlzOiBudW1iZXJbXTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SVJhbmRvbUdlbmVyYXRvcn0gcmFuZG9tR2VuZXJhdG9yXG4gICAgICogQHBhcmFtIHtJT3B0aW9uc30gb3B0aW9uc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgQGluamVjdChTZXJ2aWNlSWRlbnRpZmllcnMuSVJhbmRvbUdlbmVyYXRvcikgcmFuZG9tR2VuZXJhdG9yOiBJUmFuZG9tR2VuZXJhdG9yLFxuICAgICAgICBAaW5qZWN0KFNlcnZpY2VJZGVudGlmaWVycy5JT3B0aW9ucykgb3B0aW9uczogSU9wdGlvbnNcbiAgICApIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5yYW5kb21HZW5lcmF0b3IgPSByYW5kb21HZW5lcmF0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdGF0ZW1lbnRbXX0gYmxvY2tTdGF0ZW1lbnRCb2R5XG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gc2h1ZmZsZWRLZXlzXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gb3JpZ2luYWxLZXlzSW5kZXhlc0luU2h1ZmZsZWRBcnJheVxuICAgICAqL1xuICAgIHB1YmxpYyBpbml0aWFsaXplIChcbiAgICAgICAgYmxvY2tTdGF0ZW1lbnRCb2R5OiBFU1RyZWUuU3RhdGVtZW50W10sXG4gICAgICAgIHNodWZmbGVkS2V5czogbnVtYmVyW10sXG4gICAgICAgIG9yaWdpbmFsS2V5c0luZGV4ZXNJblNodWZmbGVkQXJyYXk6IG51bWJlcltdXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYmxvY2tTdGF0ZW1lbnRCb2R5ID0gYmxvY2tTdGF0ZW1lbnRCb2R5O1xuICAgICAgICB0aGlzLnNodWZmbGVkS2V5cyA9IHNodWZmbGVkS2V5cztcbiAgICAgICAgdGhpcy5vcmlnaW5hbEtleXNJbmRleGVzSW5TaHVmZmxlZEFycmF5ID0gb3JpZ2luYWxLZXlzSW5kZXhlc0luU2h1ZmZsZWRBcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7VFN0YXRlbWVudFtdfVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZXROb2RlU3RydWN0dXJlICgpOiBUU3RhdGVtZW50W10ge1xuICAgICAgICBjb25zdCBjb250cm9sbGVySWRlbnRpZmllck5hbWU6IHN0cmluZyA9IHRoaXMucmFuZG9tR2VuZXJhdG9yLmdldFJhbmRvbVN0cmluZygzKTtcbiAgICAgICAgY29uc3QgaW5kZXhJZGVudGlmaWVyTmFtZTogc3RyaW5nID0gdGhpcy5yYW5kb21HZW5lcmF0b3IuZ2V0UmFuZG9tU3RyaW5nKDMpO1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmU6IEVTVHJlZS5CbG9ja1N0YXRlbWVudCA9IE5vZGVzLmdldEJsb2NrU3RhdGVtZW50Tm9kZShbXG4gICAgICAgICAgICBOb2Rlcy5nZXRWYXJpYWJsZURlY2xhcmF0aW9uTm9kZShbXG4gICAgICAgICAgICAgICAgTm9kZXMuZ2V0VmFyaWFibGVEZWNsYXJhdG9yTm9kZShcbiAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0SWRlbnRpZmllck5vZGUoY29udHJvbGxlcklkZW50aWZpZXJOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0Q2FsbEV4cHJlc3Npb25Ob2RlKFxuICAgICAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0TWVtYmVyRXhwcmVzc2lvbk5vZGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0TGl0ZXJhbE5vZGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JpZ2luYWxLZXlzSW5kZXhlc0luU2h1ZmZsZWRBcnJheS5qb2luKCd8JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vZGVzLmdldElkZW50aWZpZXJOb2RlKCdzcGxpdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vZGVzLmdldExpdGVyYWxOb2RlKCd8JylcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgTm9kZXMuZ2V0VmFyaWFibGVEZWNsYXJhdG9yTm9kZShcbiAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0SWRlbnRpZmllck5vZGUoaW5kZXhJZGVudGlmaWVyTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIE5vZGVzLmdldExpdGVyYWxOb2RlKDApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBOb2Rlcy5nZXRXaGlsZVN0YXRlbWVudE5vZGUoXG4gICAgICAgICAgICAgICAgTm9kZXMuZ2V0TGl0ZXJhbE5vZGUodHJ1ZSksXG4gICAgICAgICAgICAgICAgTm9kZXMuZ2V0QmxvY2tTdGF0ZW1lbnROb2RlKFtcbiAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0U3dpdGNoU3RhdGVtZW50Tm9kZShcbiAgICAgICAgICAgICAgICAgICAgICAgIE5vZGVzLmdldE1lbWJlckV4cHJlc3Npb25Ob2RlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vZGVzLmdldElkZW50aWZpZXJOb2RlKGNvbnRyb2xsZXJJZGVudGlmaWVyTmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0VXBkYXRlRXhwcmVzc2lvbk5vZGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcrKycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vZGVzLmdldElkZW50aWZpZXJOb2RlKGluZGV4SWRlbnRpZmllck5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaHVmZmxlZEtleXMubWFwKChrZXk6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOb2Rlcy5nZXRTd2l0Y2hDYXNlTm9kZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0TGl0ZXJhbE5vZGUoU3RyaW5nKGluZGV4KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tTdGF0ZW1lbnRCb2R5W2tleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb2Rlcy5nZXRDb250aW51ZVN0YXRlbWVudCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgTm9kZXMuZ2V0QnJlYWtTdGF0ZW1lbnQoKVxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICApXG4gICAgICAgIF0pO1xuXG4gICAgICAgIE5vZGVVdGlscy5wYXJlbnRpemUoc3RydWN0dXJlKTtcblxuICAgICAgICByZXR1cm4gW3N0cnVjdHVyZV07XG4gICAgfVxufVxuIl19