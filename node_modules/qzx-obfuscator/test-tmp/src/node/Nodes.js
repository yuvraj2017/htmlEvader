"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

Object.defineProperty(exports, "__esModule", { value: true });
var escodegen = require("escodegen-wallaby");
var NodeType_1 = require("../enums/NodeType");

var Nodes = function () {
    function Nodes() {
        _classCallCheck(this, Nodes);
    }

    _createClass(Nodes, null, [{
        key: "getProgramNode",
        value: function getProgramNode() {
            var body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

            return {
                type: NodeType_1.NodeType.Program,
                body: body,
                sourceType: 'script',
                obfuscatedNode: false
            };
        }
    }, {
        key: "getArrayExpressionNode",
        value: function getArrayExpressionNode() {
            var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

            return {
                type: NodeType_1.NodeType.ArrayExpression,
                elements: elements
            };
        }
    }, {
        key: "getAssignmentExpressionNode",
        value: function getAssignmentExpressionNode(operator, left, right) {
            return {
                type: NodeType_1.NodeType.AssignmentExpression,
                operator: operator,
                left: left,
                right: right,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getBinaryExpressionNode",
        value: function getBinaryExpressionNode(operator, left, right) {
            return {
                type: NodeType_1.NodeType.BinaryExpression,
                operator: operator,
                left: left,
                right: right,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getBlockStatementNode",
        value: function getBlockStatementNode() {
            var body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

            return {
                type: NodeType_1.NodeType.BlockStatement,
                body: body,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getBreakStatement",
        value: function getBreakStatement(label) {
            var breakStatementNode = {
                type: NodeType_1.NodeType.BreakStatement,
                obfuscatedNode: false
            };
            if (label) {
                breakStatementNode.label = label;
            }
            return breakStatementNode;
        }
    }, {
        key: "getCatchClauseNode",
        value: function getCatchClauseNode() {
            var body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

            return {
                type: NodeType_1.NodeType.CatchClause,
                param: Nodes.getIdentifierNode('err'),
                body: Nodes.getBlockStatementNode(body),
                obfuscatedNode: false
            };
        }
    }, {
        key: "getCallExpressionNode",
        value: function getCallExpressionNode(callee) {
            var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

            return {
                type: NodeType_1.NodeType.CallExpression,
                callee: callee,
                arguments: args,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getContinueStatement",
        value: function getContinueStatement(label) {
            var continueStatementNode = {
                type: NodeType_1.NodeType.ContinueStatement,
                obfuscatedNode: false
            };
            if (label) {
                continueStatementNode.label = label;
            }
            return continueStatementNode;
        }
    }, {
        key: "getExpressionStatementNode",
        value: function getExpressionStatementNode(expression) {
            return {
                type: NodeType_1.NodeType.ExpressionStatement,
                expression: expression,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getFunctionDeclarationNode",
        value: function getFunctionDeclarationNode(functionName, params, body) {
            return {
                type: NodeType_1.NodeType.FunctionDeclaration,
                id: Nodes.getIdentifierNode(functionName),
                params: params,
                body: body,
                generator: false,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getFunctionExpressionNode",
        value: function getFunctionExpressionNode(params, body) {
            return {
                type: NodeType_1.NodeType.FunctionExpression,
                params: params,
                body: body,
                generator: false,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getIfStatementNode",
        value: function getIfStatementNode(test, consequent, alternate) {
            return Object.assign({ type: NodeType_1.NodeType.IfStatement, test: test,
                consequent: consequent }, alternate && { alternate: alternate }, { obfuscatedNode: false });
        }
    }, {
        key: "getIdentifierNode",
        value: function getIdentifierNode(name) {
            return {
                type: NodeType_1.NodeType.Identifier,
                name: name,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getLabeledStatement",
        value: function getLabeledStatement(label, body) {
            return {
                type: NodeType_1.NodeType.LabeledStatement,
                label: label,
                body: body,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getLiteralNode",
        value: function getLiteralNode(value, raw) {
            raw = raw !== undefined ? raw : "'" + value + "'";
            return {
                type: NodeType_1.NodeType.Literal,
                value: value,
                raw: raw,
                'x-verbatim-property': {
                    content: raw,
                    precedence: escodegen.Precedence.Primary
                },
                obfuscatedNode: false
            };
        }
    }, {
        key: "getLogicalExpressionNode",
        value: function getLogicalExpressionNode(operator, left, right) {
            return {
                type: NodeType_1.NodeType.LogicalExpression,
                operator: operator,
                left: left,
                right: right,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getMemberExpressionNode",
        value: function getMemberExpressionNode(object, property) {
            var computed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

            return {
                type: NodeType_1.NodeType.MemberExpression,
                computed: computed,
                object: object,
                property: property,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getObjectExpressionNode",
        value: function getObjectExpressionNode(properties) {
            return {
                type: NodeType_1.NodeType.ObjectExpression,
                properties: properties,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getPropertyNode",
        value: function getPropertyNode(key, value) {
            var computed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

            return {
                type: NodeType_1.NodeType.Property,
                key: key,
                value: value,
                kind: 'init',
                method: false,
                shorthand: false,
                computed: computed,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getUnaryExpressionNode",
        value: function getUnaryExpressionNode(operator, argument) {
            var prefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

            return {
                type: NodeType_1.NodeType.UnaryExpression,
                operator: operator,
                argument: argument,
                prefix: prefix,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getReturnStatementNode",
        value: function getReturnStatementNode(argument) {
            return {
                type: NodeType_1.NodeType.ReturnStatement,
                argument: argument,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getSwitchStatementNode",
        value: function getSwitchStatementNode(discriminant, cases) {
            return {
                type: NodeType_1.NodeType.SwitchStatement,
                discriminant: discriminant,
                cases: cases,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getSwitchCaseNode",
        value: function getSwitchCaseNode(test, consequent) {
            return {
                type: NodeType_1.NodeType.SwitchCase,
                test: test,
                consequent: consequent,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getUpdateExpressionNode",
        value: function getUpdateExpressionNode(operator, argumentExpr) {
            return {
                type: NodeType_1.NodeType.UpdateExpression,
                operator: operator,
                argument: argumentExpr,
                prefix: false,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getVariableDeclarationNode",
        value: function getVariableDeclarationNode() {
            var declarations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
            var kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'var';

            return {
                type: NodeType_1.NodeType.VariableDeclaration,
                declarations: declarations,
                kind: kind,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getVariableDeclaratorNode",
        value: function getVariableDeclaratorNode(id, init) {
            return {
                type: NodeType_1.NodeType.VariableDeclarator,
                id: id,
                init: init,
                obfuscatedNode: false
            };
        }
    }, {
        key: "getWhileStatementNode",
        value: function getWhileStatementNode(test, body) {
            return {
                type: NodeType_1.NodeType.WhileStatement,
                test: test,
                body: body,
                obfuscatedNode: false
            };
        }
    }]);

    return Nodes;
}();

exports.Nodes = Nodes;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm9kZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbm9kZS9Ob2Rlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsd0JBQStDO0FBSy9DLHlCQUE2QyxBQUU3Qzs7SUFLVyxBQUFNLEFBQUMsQUFBYzs7Ozs7Ozs7Z0JBQUUsMkVBQXFCLEFBQUU7O0FBQ2pELEFBQU07QUFDRixBQUFJLHNCQUFFLFdBQVEsU0FBQyxBQUFPO0FBQ3RCLEFBQUk7QUFDSixBQUFVLDRCQUFFLEFBQVE7QUFDcEIsQUFBYyxnQ0FBRSxBQUFLLEFBQ3hCLEFBQUMsQUFDTjtBQU5XO0FBTVYsQUFNTSxBQUFNLEFBQUMsQUFBc0I7Ozs7Z0JBQ2hDLCtFQUF5RCxBQUFFOztBQUUzRCxBQUFNO0FBQ0YsQUFBSSxzQkFBRSxXQUFRLFNBQUMsQUFBZTtBQUM5QixBQUFRLEFBQ1gsQUFBQyxBQUNOO0FBSlc7QUFJVixBQVFNLEFBQU0sQUFBQyxBQUEyQjs7O29EQUNyQyxBQUFtQyxVQUNuQyxBQUE4QyxNQUM5QyxBQUF3QjtBQUV4QixBQUFNO0FBQ0YsQUFBSSxzQkFBRSxXQUFRLFNBQUMsQUFBb0I7QUFDbkMsQUFBUTtBQUNSLEFBQUk7QUFDSixBQUFLO0FBQ0wsQUFBYyxnQ0FBRSxBQUFLLEFBQ3hCLEFBQUMsQUFDTjtBQVBXO0FBT1YsQUFRTSxBQUFNLEFBQUMsQUFBdUI7OztnREFDakMsQUFBK0IsVUFDL0IsQUFBdUIsTUFDdkIsQUFBd0I7QUFFeEIsQUFBTTtBQUNGLEFBQUksc0JBQUUsV0FBUSxTQUFDLEFBQWdCO0FBQy9CLEFBQVE7QUFDUixBQUFJO0FBQ0osQUFBSztBQUNMLEFBQWMsZ0NBQUUsQUFBSyxBQUN4QixBQUFDLEFBQ047QUFQVztBQU9WLEFBTU0sQUFBTSxBQUFDLEFBQXFCOzs7O2dCQUFFLDJFQUEyQixBQUFFOztBQUM5RCxBQUFNO0FBQ0YsQUFBSSxzQkFBRSxXQUFRLFNBQUMsQUFBYztBQUM3QixBQUFJO0FB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QUFNO0FBQ0YsQUFBSSxzQkFBRSxXQUFRLFNBQUMsQUFBVTtBQUN6QixBQUFJO0FBQ0osQUFBVTtBQUNWLEFBQWMsZ0NBQUUsQUFBSyxBQUN4QixBQUFDLEFBQ047QUFOVztBQU1WLEFBT00sQUFBTSxBQUFDLEFBQXVCOzs7Z0RBQUUsQUFBK0IsVUFBRSxBQUErQjtBQUNuRyxBQUFNO0FBQ0YsQUFBSSxzQkFBRSxXQUFRLFNBQUMsQUFBZ0I7QUFDL0IsQUFBUTtBQUNSLEFBQVEsMEJBQUUsQUFBWTtBQUN0QixBQUFNLHdCQUFFLEFBQUs7QUFDYixBQUFjLGdDQUFFLEFBQUssQUFDeEIsQUFBQyxBQUNOO0FBUFc7QUFPVixBQU9NLEFBQU0sQUFBQyxBQUEwQjs7OztnQkFDcEMsbUZBQTRDLEFBQUU7Z0JBQzlDLDJFQUFnQyxBQUFLOztBQUVyQyxBQUFNO0FBQ0YsQUFBSSxzQkFBRSxXQUFRLFNBQUMsQUFBbUI7QUFDbEMsQUFBWTtBQUNaLEFBQUk7QUFDSixBQUFjLGdDQUFFLEFBQUssQUFDeEIsQUFBQyxBQUNOO0FBTlc7QUFNVixBQU9NLEFBQU0sQUFBQyxBQUF5Qjs7O2tEQUFFLEFBQXFCLElBQUUsQUFBUztBQUNyRSxBQUFNO0FBQ0YsQUFBSSxzQkFBRSxXQUFRLFNBQUMsQUFBa0I7QUFDakMsQUFBRTtBQUNGLEFBQUk7QUFDSixBQUFjLGdDQUFFLEFBQUssQUFDeEIsQUFBQyxBQUNOO0FBTlc7QUFNVixBQU9NLEFBQU0sQUFBQyxBQUFxQjs7OzhDQUFFLEFBQXVCLE1BQUUsQUFBc0I7QUFDaEYsQUFBTTtBQUNGLEFBQUksc0JBQUUsV0FBUSxTQUFDLEFBQWM7QUFDN0IsQUFBSTtBQUNKLEFBQUk7QUFDSixBQUFjLGdDQUFFLEFBQUssQUFDeEIsQUFBQyxBQUNOO0FBTlc7QUFNVixBQUNKOzs7Ozs7QUF6Y0QsZ0JBeWNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZXNjb2RlZ2VuIGZyb20gJ2VzY29kZWdlbi13YWxsYWJ5JztcbmltcG9ydCAqIGFzIEVTVHJlZSBmcm9tICdlc3RyZWUnO1xuXG5pbXBvcnQgeyBUU3RhdGVtZW50IH0gZnJvbSAnLi4vdHlwZXMvbm9kZS9UU3RhdGVtZW50JztcblxuaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICcuLi9lbnVtcy9Ob2RlVHlwZSc7XG5cbmV4cG9ydCBjbGFzcyBOb2RlcyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUU3RhdGVtZW50W119IGJvZHlcbiAgICAgKiBAcmV0dXJucyB7UHJvZ3JhbX1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFByb2dyYW1Ob2RlIChib2R5OiBUU3RhdGVtZW50W10gPSBbXSk6IEVTVHJlZS5Qcm9ncmFtIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLlByb2dyYW0sXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgc291cmNlVHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyhFeHByZXNzaW9uIHwgU3ByZWFkRWxlbWVudClbXX0gZWxlbWVudHNcbiAgICAgKiBAcmV0dXJucyB7QXJyYXlFeHByZXNzaW9ufVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0QXJyYXlFeHByZXNzaW9uTm9kZSAoXG4gICAgICAgIGVsZW1lbnRzOiAoRVNUcmVlLkV4cHJlc3Npb24gfCBFU1RyZWUuU3ByZWFkRWxlbWVudClbXSA9IFtdXG4gICAgKTogRVNUcmVlLkFycmF5RXhwcmVzc2lvbiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5BcnJheUV4cHJlc3Npb24sXG4gICAgICAgICAgICBlbGVtZW50c1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXNzaWdubWVudE9wZXJhdG9yfSBvcGVyYXRvclxuICAgICAqIEBwYXJhbSB7UGF0dGVybiB8IE1lbWJlckV4cHJlc3Npb259IGxlZnRcbiAgICAgKiBAcGFyYW0ge0V4cHJlc3Npb259IHJpZ2h0XG4gICAgICogQHJldHVybnMge0Fzc2lnbm1lbnRFeHByZXNzaW9ufVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0QXNzaWdubWVudEV4cHJlc3Npb25Ob2RlIChcbiAgICAgICAgb3BlcmF0b3I6IEVTVHJlZS5Bc3NpZ25tZW50T3BlcmF0b3IsXG4gICAgICAgIGxlZnQ6IEVTVHJlZS5QYXR0ZXJuIHwgRVNUcmVlLk1lbWJlckV4cHJlc3Npb24sXG4gICAgICAgIHJpZ2h0OiBFU1RyZWUuRXhwcmVzc2lvblxuICAgICk6IEVTVHJlZS5Bc3NpZ25tZW50RXhwcmVzc2lvbiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5Bc3NpZ25tZW50RXhwcmVzc2lvbixcbiAgICAgICAgICAgIG9wZXJhdG9yLFxuICAgICAgICAgICAgbGVmdCxcbiAgICAgICAgICAgIHJpZ2h0LFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtCaW5hcnlPcGVyYXRvcn0gb3BlcmF0b3JcbiAgICAgKiBAcGFyYW0ge0V4cHJlc3Npb259IGxlZnRcbiAgICAgKiBAcGFyYW0ge0V4cHJlc3Npb259IHJpZ2h0XG4gICAgICogQHJldHVybnMge0JpbmFyeUV4cHJlc3Npb259XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRCaW5hcnlFeHByZXNzaW9uTm9kZSAoXG4gICAgICAgIG9wZXJhdG9yOiBFU1RyZWUuQmluYXJ5T3BlcmF0b3IsXG4gICAgICAgIGxlZnQ6IEVTVHJlZS5FeHByZXNzaW9uLFxuICAgICAgICByaWdodDogRVNUcmVlLkV4cHJlc3Npb24sXG4gICAgKTogRVNUcmVlLkJpbmFyeUV4cHJlc3Npb24ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuQmluYXJ5RXhwcmVzc2lvbixcbiAgICAgICAgICAgIG9wZXJhdG9yLFxuICAgICAgICAgICAgbGVmdCxcbiAgICAgICAgICAgIHJpZ2h0LFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdGF0ZW1lbnRbXX0gYm9keVxuICAgICAqIEByZXR1cm5zIHtCbG9ja1N0YXRlbWVudH1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldEJsb2NrU3RhdGVtZW50Tm9kZSAoYm9keTogRVNUcmVlLlN0YXRlbWVudFtdID0gW10pOiBFU1RyZWUuQmxvY2tTdGF0ZW1lbnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuQmxvY2tTdGF0ZW1lbnQsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtJZGVudGlmaWVyfSBsYWJlbFxuICAgICAqIEByZXR1cm5zIHtCcmVha1N0YXRlbWVudH1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldEJyZWFrU3RhdGVtZW50IChsYWJlbD86IEVTVHJlZS5JZGVudGlmaWVyKTogRVNUcmVlLkJyZWFrU3RhdGVtZW50IHtcbiAgICAgICAgY29uc3QgYnJlYWtTdGF0ZW1lbnROb2RlOiBFU1RyZWUuQnJlYWtTdGF0ZW1lbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5CcmVha1N0YXRlbWVudCxcbiAgICAgICAgICAgIG9iZnVzY2F0ZWROb2RlOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgYnJlYWtTdGF0ZW1lbnROb2RlLmxhYmVsID0gbGFiZWw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnJlYWtTdGF0ZW1lbnROb2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7U3RhdGVtZW50W119IGJvZHlcbiAgICAgKiBAcmV0dXJucyB7Q2F0Y2hDbGF1c2V9XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRDYXRjaENsYXVzZU5vZGUgKGJvZHk6IEVTVHJlZS5TdGF0ZW1lbnRbXSA9IFtdKTogRVNUcmVlLkNhdGNoQ2xhdXNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLkNhdGNoQ2xhdXNlLFxuICAgICAgICAgICAgcGFyYW06IE5vZGVzLmdldElkZW50aWZpZXJOb2RlKCdlcnInKSxcbiAgICAgICAgICAgIGJvZHk6IE5vZGVzLmdldEJsb2NrU3RhdGVtZW50Tm9kZShib2R5KSxcbiAgICAgICAgICAgIG9iZnVzY2F0ZWROb2RlOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXhwcmVzc2lvbn0gY2FsbGVlXG4gICAgICogQHBhcmFtIHsoRXhwcmVzc2lvbiB8IFNwcmVhZEVsZW1lbnQpW119IGFyZ3NcbiAgICAgKiBAcmV0dXJucyB7Q2FsbEV4cHJlc3Npb259XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRDYWxsRXhwcmVzc2lvbk5vZGUgKFxuICAgICAgICBjYWxsZWU6IEVTVHJlZS5FeHByZXNzaW9uLFxuICAgICAgICBhcmdzOiAoRVNUcmVlLkV4cHJlc3Npb24gfCBFU1RyZWUuU3ByZWFkRWxlbWVudClbXSA9IFtdXG4gICAgKTogRVNUcmVlLkNhbGxFeHByZXNzaW9uIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLkNhbGxFeHByZXNzaW9uLFxuICAgICAgICAgICAgY2FsbGVlLFxuICAgICAgICAgICAgYXJndW1lbnRzOiBhcmdzLFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtJZGVudGlmaWVyfSBsYWJlbFxuICAgICAqIEByZXR1cm5zIHtDb250aW51ZVN0YXRlbWVudH1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldENvbnRpbnVlU3RhdGVtZW50IChsYWJlbD86IEVTVHJlZS5JZGVudGlmaWVyKTogRVNUcmVlLkNvbnRpbnVlU3RhdGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGludWVTdGF0ZW1lbnROb2RlOiBFU1RyZWUuQ29udGludWVTdGF0ZW1lbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5Db250aW51ZVN0YXRlbWVudCxcbiAgICAgICAgICAgIG9iZnVzY2F0ZWROb2RlOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgY29udGludWVTdGF0ZW1lbnROb2RlLmxhYmVsID0gbGFiZWw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGludWVTdGF0ZW1lbnROb2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXhwcmVzc2lvbn0gZXhwcmVzc2lvblxuICAgICAqIEByZXR1cm5zIHtFeHByZXNzaW9uU3RhdGVtZW50fVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RXhwcmVzc2lvblN0YXRlbWVudE5vZGUgKGV4cHJlc3Npb246IEVTVHJlZS5FeHByZXNzaW9uKTogRVNUcmVlLkV4cHJlc3Npb25TdGF0ZW1lbnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuRXhwcmVzc2lvblN0YXRlbWVudCxcbiAgICAgICAgICAgIGV4cHJlc3Npb24sXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZnVuY3Rpb25OYW1lXG4gICAgICogQHBhcmFtIHtJZGVudGlmaWVyW119IHBhcmFtc1xuICAgICAqIEBwYXJhbSB7QmxvY2tTdGF0ZW1lbnR9IGJvZHlcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb25EZWNsYXJhdGlvbn1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldEZ1bmN0aW9uRGVjbGFyYXRpb25Ob2RlIChcbiAgICAgICAgZnVuY3Rpb25OYW1lOiBzdHJpbmcsXG4gICAgICAgIHBhcmFtczogRVNUcmVlLklkZW50aWZpZXJbXSxcbiAgICAgICAgYm9keTogRVNUcmVlLkJsb2NrU3RhdGVtZW50XG4gICAgKTogRVNUcmVlLkZ1bmN0aW9uRGVjbGFyYXRpb24ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuRnVuY3Rpb25EZWNsYXJhdGlvbixcbiAgICAgICAgICAgIGlkOiBOb2Rlcy5nZXRJZGVudGlmaWVyTm9kZShmdW5jdGlvbk5hbWUpLFxuICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIGdlbmVyYXRvcjogZmFsc2UsXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0lkZW50aWZpZXJbXX0gcGFyYW1zXG4gICAgICogQHBhcmFtIHtCbG9ja1N0YXRlbWVudH0gYm9keVxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbkV4cHJlc3Npb259XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRGdW5jdGlvbkV4cHJlc3Npb25Ob2RlIChcbiAgICAgICAgcGFyYW1zOiBFU1RyZWUuSWRlbnRpZmllcltdLFxuICAgICAgICBib2R5OiBFU1RyZWUuQmxvY2tTdGF0ZW1lbnRcbiAgICApOiBFU1RyZWUuRnVuY3Rpb25FeHByZXNzaW9uIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLkZ1bmN0aW9uRXhwcmVzc2lvbixcbiAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICBnZW5lcmF0b3I6IGZhbHNlLFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFeHByZXNzaW9ufSB0ZXN0XG4gICAgICogQHBhcmFtIHtCbG9ja1N0YXRlbWVudH0gY29uc2VxdWVudFxuICAgICAqIEBwYXJhbSB7QmxvY2tTdGF0ZW1lbnR9IGFsdGVybmF0ZVxuICAgICAqIEByZXR1cm5zIHtJZlN0YXRlbWVudH1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldElmU3RhdGVtZW50Tm9kZSAoXG4gICAgICAgIHRlc3Q6IEVTVHJlZS5FeHByZXNzaW9uLFxuICAgICAgICBjb25zZXF1ZW50OiBFU1RyZWUuQmxvY2tTdGF0ZW1lbnQsXG4gICAgICAgIGFsdGVybmF0ZT86IEVTVHJlZS5CbG9ja1N0YXRlbWVudFxuICAgICk6IEVTVHJlZS5JZlN0YXRlbWVudCB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5JZlN0YXRlbWVudCxcbiAgICAgICAgICAgIHRlc3QsXG4gICAgICAgICAgICBjb25zZXF1ZW50LFxuICAgICAgICAgICAgLi4uYWx0ZXJuYXRlICYmIHsgYWx0ZXJuYXRlIH0sXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEByZXR1cm5zIHtJZGVudGlmaWVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0SWRlbnRpZmllck5vZGUgKG5hbWU6IHN0cmluZyk6IEVTVHJlZS5JZGVudGlmaWVyIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLklkZW50aWZpZXIsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtJZGVudGlmaWVyfSBsYWJlbFxuICAgICAqIEBwYXJhbSB7U3RhdGVtZW50fSBib2R5XG4gICAgICogQHJldHVybnMge0xhYmVsZWRTdGF0ZW1lbnR9XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRMYWJlbGVkU3RhdGVtZW50IChsYWJlbDogRVNUcmVlLklkZW50aWZpZXIsIGJvZHk6IEVTVHJlZS5TdGF0ZW1lbnQpOiBFU1RyZWUuTGFiZWxlZFN0YXRlbWVudCB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5MYWJlbGVkU3RhdGVtZW50LFxuICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFuIHwgbnVtYmVyIHwgc3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICAgKiBAcmV0dXJucyB7TGl0ZXJhbH1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldExpdGVyYWxOb2RlICh2YWx1ZTogYm9vbGVhbnxudW1iZXJ8c3RyaW5nLCByYXc/OiBzdHJpbmcpOiBFU1RyZWUuTGl0ZXJhbCB7XG4gICAgICAgIHJhdyA9IHJhdyAhPT0gdW5kZWZpbmVkID8gcmF3IDogYCcke3ZhbHVlfSdgO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5MaXRlcmFsLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICByYXcsXG4gICAgICAgICAgICAneC12ZXJiYXRpbS1wcm9wZXJ0eSc6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiByYXcsXG4gICAgICAgICAgICAgICAgcHJlY2VkZW5jZTogZXNjb2RlZ2VuLlByZWNlZGVuY2UuUHJpbWFyeVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9iZnVzY2F0ZWROb2RlOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TG9naWNhbE9wZXJhdG9yfSBvcGVyYXRvclxuICAgICAqIEBwYXJhbSB7RXhwcmVzc2lvbn0gbGVmdFxuICAgICAqIEBwYXJhbSB7RXhwcmVzc2lvbn0gcmlnaHRcbiAgICAgKiBAcmV0dXJucyB7TG9naWNhbEV4cHJlc3Npb259XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRMb2dpY2FsRXhwcmVzc2lvbk5vZGUgKFxuICAgICAgICBvcGVyYXRvcjogRVNUcmVlLkxvZ2ljYWxPcGVyYXRvcixcbiAgICAgICAgbGVmdDogRVNUcmVlLkV4cHJlc3Npb24sXG4gICAgICAgIHJpZ2h0OiBFU1RyZWUuRXhwcmVzc2lvbixcbiAgICApOiBFU1RyZWUuTG9naWNhbEV4cHJlc3Npb24ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuTG9naWNhbEV4cHJlc3Npb24sXG4gICAgICAgICAgICBvcGVyYXRvcixcbiAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICByaWdodCxcbiAgICAgICAgICAgIG9iZnVzY2F0ZWROb2RlOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXhwcmVzc2lvbiB8IFN1cGVyfSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge0V4cHJlc3Npb259IHByb3BlcnR5XG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb21wdXRlZFxuICAgICAqIEByZXR1cm5zIHtNZW1iZXJFeHByZXNzaW9ufVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TWVtYmVyRXhwcmVzc2lvbk5vZGUgKFxuICAgICAgICBvYmplY3Q6IEVTVHJlZS5FeHByZXNzaW9uIHwgRVNUcmVlLlN1cGVyLFxuICAgICAgICBwcm9wZXJ0eTogRVNUcmVlLkV4cHJlc3Npb24sXG4gICAgICAgIGNvbXB1dGVkOiBib29sZWFuID0gZmFsc2VcbiAgICApOiBFU1RyZWUuTWVtYmVyRXhwcmVzc2lvbiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5NZW1iZXJFeHByZXNzaW9uLFxuICAgICAgICAgICAgY29tcHV0ZWQsXG4gICAgICAgICAgICBvYmplY3QsXG4gICAgICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgICAgIG9iZnVzY2F0ZWROb2RlOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UHJvcGVydHlbXX0gcHJvcGVydGllc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3RFeHByZXNzaW9ufVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0T2JqZWN0RXhwcmVzc2lvbk5vZGUgKHByb3BlcnRpZXM6IEVTVHJlZS5Qcm9wZXJ0eVtdKTogRVNUcmVlLk9iamVjdEV4cHJlc3Npb24ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuT2JqZWN0RXhwcmVzc2lvbixcbiAgICAgICAgICAgIHByb3BlcnRpZXMsXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0V4cHJlc3Npb259IGtleVxuICAgICAqIEBwYXJhbSB7RXhwcmVzc2lvbiB8IFBhdHRlcm59IHZhbHVlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb21wdXRlZFxuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eX1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFByb3BlcnR5Tm9kZSAoXG4gICAgICAgIGtleTogRVNUcmVlLkV4cHJlc3Npb24sXG4gICAgICAgIHZhbHVlOiBFU1RyZWUuRXhwcmVzc2lvbiB8IEVTVHJlZS5QYXR0ZXJuLFxuICAgICAgICBjb21wdXRlZDogYm9vbGVhbiA9IGZhbHNlXG4gICAgKTogRVNUcmVlLlByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLlByb3BlcnR5LFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBraW5kOiAnaW5pdCcsXG4gICAgICAgICAgICBtZXRob2Q6IGZhbHNlLFxuICAgICAgICAgICAgc2hvcnRoYW5kOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbXB1dGVkLFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtVbmFyeU9wZXJhdG9yfSBvcGVyYXRvclxuICAgICAqIEBwYXJhbSB7RXhwcmVzc2lvbn0gYXJndW1lbnRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHByZWZpeFxuICAgICAqIEByZXR1cm5zIHtVbmFyeUV4cHJlc3Npb259XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRVbmFyeUV4cHJlc3Npb25Ob2RlIChcbiAgICAgICAgb3BlcmF0b3I6IEVTVHJlZS5VbmFyeU9wZXJhdG9yLFxuICAgICAgICBhcmd1bWVudDogRVNUcmVlLkV4cHJlc3Npb24sXG4gICAgICAgIHByZWZpeDogYm9vbGVhbiA9IHRydWVcbiAgICApOiBFU1RyZWUuVW5hcnlFeHByZXNzaW9uIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLlVuYXJ5RXhwcmVzc2lvbixcbiAgICAgICAgICAgIG9wZXJhdG9yLFxuICAgICAgICAgICAgYXJndW1lbnQsXG4gICAgICAgICAgICBwcmVmaXgsXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0V4cHJlc3Npb259IGFyZ3VtZW50XG4gICAgICogQHJldHVybnMge1JldHVyblN0YXRlbWVudH1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFJldHVyblN0YXRlbWVudE5vZGUgKGFyZ3VtZW50OiBFU1RyZWUuRXhwcmVzc2lvbik6IEVTVHJlZS5SZXR1cm5TdGF0ZW1lbnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuUmV0dXJuU3RhdGVtZW50LFxuICAgICAgICAgICAgYXJndW1lbnQsXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0V4cHJlc3Npb259IGRpc2NyaW1pbmFudFxuICAgICAqIEBwYXJhbSB7U3dpdGNoQ2FzZVtdfSBjYXNlc1xuICAgICAqIEByZXR1cm5zIHtTd2l0Y2hTdGF0ZW1lbnR9XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRTd2l0Y2hTdGF0ZW1lbnROb2RlIChcbiAgICAgICAgZGlzY3JpbWluYW50OiBFU1RyZWUuRXhwcmVzc2lvbixcbiAgICAgICAgY2FzZXM6IEVTVHJlZS5Td2l0Y2hDYXNlW11cbiAgICApOiBFU1RyZWUuU3dpdGNoU3RhdGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLlN3aXRjaFN0YXRlbWVudCxcbiAgICAgICAgICAgIGRpc2NyaW1pbmFudCxcbiAgICAgICAgICAgIGNhc2VzLFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFeHByZXNzaW9ufSB0ZXN0XG4gICAgICogQHBhcmFtIHtTdGF0ZW1lbnRbXX0gY29uc2VxdWVudFxuICAgICAqIEByZXR1cm5zIHtTd2l0Y2hDYXNlfVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0U3dpdGNoQ2FzZU5vZGUgKHRlc3Q6IEVTVHJlZS5FeHByZXNzaW9uLCBjb25zZXF1ZW50OiBFU1RyZWUuU3RhdGVtZW50W10pOiBFU1RyZWUuU3dpdGNoQ2FzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5Td2l0Y2hDYXNlLFxuICAgICAgICAgICAgdGVzdCxcbiAgICAgICAgICAgIGNvbnNlcXVlbnQsXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1VwZGF0ZU9wZXJhdG9yfSBvcGVyYXRvclxuICAgICAqIEBwYXJhbSB7RXhwcmVzc2lvbn0gYXJndW1lbnRFeHByXG4gICAgICogQHJldHVybnMge1VwZGF0ZUV4cHJlc3Npb259XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRVcGRhdGVFeHByZXNzaW9uTm9kZSAob3BlcmF0b3I6IEVTVHJlZS5VcGRhdGVPcGVyYXRvciwgYXJndW1lbnRFeHByOiBFU1RyZWUuRXhwcmVzc2lvbik6IEVTVHJlZS5VcGRhdGVFeHByZXNzaW9uIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLlVwZGF0ZUV4cHJlc3Npb24sXG4gICAgICAgICAgICBvcGVyYXRvcixcbiAgICAgICAgICAgIGFyZ3VtZW50OiBhcmd1bWVudEV4cHIsXG4gICAgICAgICAgICBwcmVmaXg6IGZhbHNlLFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtWYXJpYWJsZURlY2xhcmF0b3JbXX0gZGVjbGFyYXRpb25zXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtpbmRcbiAgICAgKiBAcmV0dXJucyB7VmFyaWFibGVEZWNsYXJhdGlvbn1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFZhcmlhYmxlRGVjbGFyYXRpb25Ob2RlIChcbiAgICAgICAgZGVjbGFyYXRpb25zOiBFU1RyZWUuVmFyaWFibGVEZWNsYXJhdG9yW10gPSBbXSxcbiAgICAgICAga2luZDogJ3ZhcicgfCAnbGV0JyB8ICdjb25zdCcgPSAndmFyJ1xuICAgICk6IEVTVHJlZS5WYXJpYWJsZURlY2xhcmF0aW9uIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLlZhcmlhYmxlRGVjbGFyYXRpb24sXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnMsXG4gICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgb2JmdXNjYXRlZE5vZGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtJZGVudGlmaWVyfSBpZFxuICAgICAqIEBwYXJhbSB7YW55fSBpbml0XG4gICAgICogQHJldHVybnMge1ZhcmlhYmxlRGVjbGFyYXRvcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFZhcmlhYmxlRGVjbGFyYXRvck5vZGUgKGlkOiBFU1RyZWUuSWRlbnRpZmllciwgaW5pdDogYW55KTogRVNUcmVlLlZhcmlhYmxlRGVjbGFyYXRvciB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5WYXJpYWJsZURlY2xhcmF0b3IsXG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGluaXQsXG4gICAgICAgICAgICBvYmZ1c2NhdGVkTm9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0V4cHJlc3Npb259IHRlc3RcbiAgICAgKiBAcGFyYW0ge1N0YXRlbWVudH0gYm9keVxuICAgICAqIEByZXR1cm5zIHtXaGlsZVN0YXRlbWVudH1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFdoaWxlU3RhdGVtZW50Tm9kZSAodGVzdDogRVNUcmVlLkV4cHJlc3Npb24sIGJvZHk6IEVTVHJlZS5TdGF0ZW1lbnQpOiBFU1RyZWUuV2hpbGVTdGF0ZW1lbnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuV2hpbGVTdGF0ZW1lbnQsXG4gICAgICAgICAgICB0ZXN0LFxuICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIG9iZnVzY2F0ZWROb2RlOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdfQ==