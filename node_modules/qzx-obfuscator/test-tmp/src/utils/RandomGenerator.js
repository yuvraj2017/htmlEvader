"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var inversify_1 = require("inversify");
var ServiceIdentifiers_1 = require("../container/ServiceIdentifiers");
var md5 = require("md5");
var chance_1 = require("chance");
var Utils_1 = require("./Utils");
var RandomGenerator = RandomGenerator_1 = function () {
    function RandomGenerator(sourceCode, options) {
        _classCallCheck(this, RandomGenerator);

        this.randomVariableNameSet = new Set();
        this.sourceCode = sourceCode;
        this.options = options;
        this.randomGenerator = options.seed === 0 ? new chance_1.Chance() : new chance_1.Chance(this.getSeed());
    }

    _createClass(RandomGenerator, [{
        key: "getMathRandom",
        value: function getMathRandom() {
            return this.getRandomInteger(0, 99999) / 100000;
        }
    }, {
        key: "getRandomFloat",
        value: function getRandomFloat(min, max) {
            return this.getRandomGenerator().floating({
                min: min,
                max: max,
                fixed: 7
            });
        }
    }, {
        key: "getRandomGenerator",
        value: function getRandomGenerator() {
            return this.randomGenerator;
        }
    }, {
        key: "getRandomInteger",
        value: function getRandomInteger(min, max) {
            return this.getRandomGenerator().integer({
                min: min,
                max: max
            });
        }
    }, {
        key: "getRandomString",
        value: function getRandomString(length) {
            var pool = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : RandomGenerator_1.randomGeneratorPool;

            return this.getRandomGenerator().string({ length: length, pool: pool });
        }
    }, {
        key: "getRandomVariableName",
        value: function getRandomVariableName(length) {
            var prefix = "_" + Utils_1.Utils.hexadecimalPrefix;
            var rangeMinInteger = 10000;
            var rangeMaxInteger = 99999999;
            var randomInteger = this.getRandomInteger(rangeMinInteger, rangeMaxInteger);
            var hexadecimalNumber = Utils_1.Utils.decToHex(randomInteger);
            var randomVariableName = "" + prefix + hexadecimalNumber.substr(0, length);
            if (this.randomVariableNameSet.has(randomVariableName)) {
                return this.getRandomVariableName(length);
            }
            this.randomVariableNameSet.add(randomVariableName);
            return randomVariableName;
        }
    }, {
        key: "getSeed",
        value: function getSeed() {
            var md5Hash = md5(this.sourceCode.getSourceCode());
            return this.options.seed + Number(md5Hash.replace(/\D/g, ''));
        }
    }]);

    return RandomGenerator;
}();
RandomGenerator.randomGeneratorPool = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
RandomGenerator.randomGeneratorPoolNumbers = '0123456789';
RandomGenerator.randomGeneratorPoolHexadecimal = "abcdef" + RandomGenerator_1.randomGeneratorPoolNumbers;
RandomGenerator = RandomGenerator_1 = tslib_1.__decorate([inversify_1.injectable(), tslib_1.__param(0, inversify_1.inject(ServiceIdentifiers_1.ServiceIdentifiers.ISourceCode)), tslib_1.__param(1, inversify_1.inject(ServiceIdentifiers_1.ServiceIdentifiers.IOptions)), tslib_1.__metadata("design:paramtypes", [Object, Object])], RandomGenerator);
exports.RandomGenerator = RandomGenerator;
var RandomGenerator_1;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFuZG9tR2VuZXJhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3V0aWxzL1JhbmRvbUdlbmVyYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLDBCQUErQztBQUMvQyxtQ0FBcUU7QUFFckUsa0JBQTJCO0FBQzNCLHVCQUFnQztBQUtoQyxzQkFBZ0M7QUFJaEMsSUFBYSxBQUFlO0FBd0N4Qiw2QkFDNEMsQUFBdUIsWUFDMUIsQUFBaUI7OztBQWxCekMsYUFBcUIsd0JBQWlCLElBQUksQUFBRyxBQUFFLEFBQUM7QUFvQjdELEFBQUksYUFBQyxBQUFVLGFBQUcsQUFBVSxBQUFDO0FBQzdCLEFBQUksYUFBQyxBQUFPLFVBQUcsQUFBTyxBQUFDO0FBRXZCLEFBQUksYUFBQyxBQUFlLGtCQUFHLEFBQU8sUUFBQyxBQUFJLFNBQUssQUFBQyxJQUNuQyxJQUFJLFNBQU0sQUFBRSxXQUNaLElBQUksU0FBTSxPQUFDLEFBQUksS0FBQyxBQUFPLEFBQUUsQUFBQyxBQUFDLEFBQ3JDO0FBQUMsQUFLTSxBQUFhOztBQXZEeEI7OztBQXdEUSxBQUFNLG1CQUFDLEFBQUksS0FBQyxBQUFnQixpQkFBQyxBQUFDLEdBQUUsQUFBSyxBQUFDLFNBQUcsQUFBTSxBQUFDLEFBQ3BEO0FBQUMsQUFPTSxBQUFjOzs7dUNBQUUsQUFBVyxLQUFFLEFBQVc7QUFDM0MsQUFBTSx3QkFBTSxBQUFrQixBQUFFLHFCQUFDLEFBQVE7QUFDckMsQUFBRyxxQkFBRSxBQUFHO0FBQ1IsQUFBRyxxQkFBRSxBQUFHO0FBQ1IsQUFBSyx1QkFBRSxBQUFDLEFBQ1gsQUFBQyxBQUFDLEFBQ1A7QUFMOEMsYUFBbkMsQUFBSTtBQUtkLEFBS00sQUFBa0I7Ozs7QUFDckIsQUFBTSxtQkFBQyxBQUFJLEtBQUMsQUFBZSxBQUFDLEFBQ2hDO0FBQUMsQUFPTSxBQUFnQjs7O3lDQUFFLEFBQVcsS0FBRSxBQUFXO0FBQzdDLEFBQU0sd0JBQU0sQUFBa0IsQUFBRSxxQkFBQyxBQUFPO0FBQ3BDLEFBQUcscUJBQUUsQUFBRztBQUNSLEFBQUcscUJBQUUsQUFBRyxBQUNYLEFBQUMsQUFBQyxBQUNQO0FBSjZDLGFBQWxDLEFBQUk7QUFJZCxBQU9NLEFBQWU7Ozt3Q0FBRSxBQUFjO2dCQUFFLDJFQUFlLEFBQWUsa0JBQUMsQUFBbUI7O0FBQ3RGLEFBQU0sbUJBQUMsQUFBSSxLQUFDLEFBQWtCLEFBQUUscUJBQUMsQUFBTSxPQUFDLEVBQUUsQUFBTSxnQkFBRSxBQUFJLEFBQUUsQUFBQyxBQUFDLEFBQzlEO0FBQUMsQUFNTSxBQUFxQjs7OzhDQUFFLEFBQWM7QUFDeEMsZ0JBQU0sQUFBTSxBQUFXLGVBQUksUUFBSyxNQUFDLEFBQWlCLEFBQUUsQUFBQztBQUNyRCxnQkFBTSxBQUFlLGtCQUFXLEFBQUssQUFBQztBQUN0QyxnQkFBTSxBQUFlLGtCQUFXLEFBQVEsQUFBQztBQUN6QyxnQkFBTSxBQUFhLGdCQUFXLEFBQUksS0FBQyxBQUFnQixpQkFBQyxBQUFlLGlCQUFFLEFBQWUsQUFBQyxBQUFDO0FBQ3RGLGdCQUFNLEFBQWlCLG9CQUFXLFFBQUssTUFBQyxBQUFRLFNBQUMsQUFBYSxBQUFDLEFBQUM7QUFDaEUsZ0JBQU0sQUFBa0IsQUFBVywwQkFBRyxBQUFNLFNBQUcsQUFBaUIsa0JBQUMsQUFBTSxPQUFDLEFBQUMsR0FBRSxBQUFNLEFBQUMsQUFBRSxBQUFDO0FBRXJGLEFBQUUsQUFBQyxnQkFBQyxBQUFJLEtBQUMsQUFBcUIsc0JBQUMsQUFBRyxJQUFDLEFBQWtCLEFBQUMsQUFBQyxxQkFBQyxBQUFDO0FBQ3JELEFBQU0sdUJBQUMsQUFBSSxLQUFDLEFBQXFCLHNCQUFDLEFBQU0sQUFBQyxBQUFDLEFBQzlDO0FBQUM7QUFFRCxBQUFJLGlCQUFDLEFBQXFCLHNCQUFDLEFBQUcsSUFBQyxBQUFrQixBQUFDLEFBQUM7QUFFbkQsQUFBTSxtQkFBQyxBQUFrQixBQUFDLEFBQzlCO0FBQUMsQUFRTyxBQUFPOzs7O0FBQ1gsZ0JBQU0sQUFBTyxVQUFXLEFBQUcsSUFBQyxBQUFJLEtBQUMsQUFBVSxXQUFDLEFBQWEsQUFBRSxBQUFDLEFBQUM7QUFFN0QsQUFBTSxtQkFBQyxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQUksT0FBRyxBQUFNLE9BQUMsQUFBTyxRQUFDLEFBQU8sUUFBQyxBQUFLLE9BQUUsQUFBRSxBQUFDLEFBQUMsQUFBQyxBQUNsRTtBQUFDLEFBQ0o7Ozs7O0FBaEkwQixnQkFBbUIsc0JBQVcsQUFBc0QsQUFBQztBQUtyRixnQkFBMEIsNkJBQVcsQUFBWSxBQUFDO0FBS2xELGdCQUE4QixBQUFXLDRDQUFTLEFBQWUsa0JBQUMsQUFBMEIsQUFBRSxBQUFDO0FBZDdHLEFBQWUsMERBRDNCLFlBQVUsQUFBRSxjQTBDSixtQkFBQSxZQUFNLE9BQUMscUJBQWtCLG1CQUFDLEFBQVcsQUFBQyxlQUN0QyxtQkFBQSxZQUFNLE9BQUMscUJBQWtCLG1CQUFDLEFBQVEsQUFBQyx3RUExQy9CLEFBQWUsQUFvSTNCO0FBcElZLDBCQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5qZWN0LCBpbmplY3RhYmxlIH0gZnJvbSAnaW52ZXJzaWZ5JztcbmltcG9ydCB7IFNlcnZpY2VJZGVudGlmaWVycyB9IGZyb20gJy4uL2NvbnRhaW5lci9TZXJ2aWNlSWRlbnRpZmllcnMnO1xuXG5pbXBvcnQgKiBhcyBtZDUgZnJvbSAnbWQ1JztcbmltcG9ydCB7IENoYW5jZSB9IGZyb20gJ2NoYW5jZSc7XG5cbmltcG9ydCB7IElPcHRpb25zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9vcHRpb25zL0lPcHRpb25zJztcbmltcG9ydCB7IElSYW5kb21HZW5lcmF0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3V0aWxzL0lSYW5kb21HZW5lcmF0b3InO1xuXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vVXRpbHMnO1xuaW1wb3J0IHsgSVNvdXJjZUNvZGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL0lTb3VyY2VDb2RlJztcblxuQGluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFJhbmRvbUdlbmVyYXRvciBpbXBsZW1lbnRzIElSYW5kb21HZW5lcmF0b3Ige1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSByYW5kb21HZW5lcmF0b3JQb29sOiBzdHJpbmcgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgcmFuZG9tR2VuZXJhdG9yUG9vbE51bWJlcnM6IHN0cmluZyA9ICcwMTIzNDU2Nzg5JztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSByYW5kb21HZW5lcmF0b3JQb29sSGV4YWRlY2ltYWw6IHN0cmluZyA9IGBhYmNkZWYke1JhbmRvbUdlbmVyYXRvci5yYW5kb21HZW5lcmF0b3JQb29sTnVtYmVyc31gO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0lPcHRpb25zfVxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgb3B0aW9uczogSU9wdGlvbnM7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7U2V0PHN0cmluZz59XG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkb25seSByYW5kb21WYXJpYWJsZU5hbWVTZXQ6IFNldCA8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDaGFuY2UuQ2hhbmNlIHwgQ2hhbmNlLlNlZWRlZENoYW5jZX1cbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IHJhbmRvbUdlbmVyYXRvcjogQ2hhbmNlLkNoYW5jZSB8IENoYW5jZS5TZWVkZWRDaGFuY2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SVNvdXJjZUNvZGV9XG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBzb3VyY2VDb2RlOiBJU291cmNlQ29kZTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SVNvdXJjZUNvZGV9IHNvdXJjZUNvZGVcbiAgICAgKiBAcGFyYW0ge0lPcHRpb25zfSBvcHRpb25zXG4gICAgICovXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBAaW5qZWN0KFNlcnZpY2VJZGVudGlmaWVycy5JU291cmNlQ29kZSkgc291cmNlQ29kZTogSVNvdXJjZUNvZGUsXG4gICAgICAgIEBpbmplY3QoU2VydmljZUlkZW50aWZpZXJzLklPcHRpb25zKSBvcHRpb25zOiBJT3B0aW9uc1xuICAgICkge1xuICAgICAgICB0aGlzLnNvdXJjZUNvZGUgPSBzb3VyY2VDb2RlO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgIHRoaXMucmFuZG9tR2VuZXJhdG9yID0gb3B0aW9ucy5zZWVkID09PSAwXG4gICAgICAgICAgICA/IG5ldyBDaGFuY2UoKVxuICAgICAgICAgICAgOiBuZXcgQ2hhbmNlKHRoaXMuZ2V0U2VlZCgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRNYXRoUmFuZG9tICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSYW5kb21JbnRlZ2VyKDAsIDk5OTk5KSAvIDEwMDAwMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldFJhbmRvbUZsb2F0IChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSYW5kb21HZW5lcmF0b3IoKS5mbG9hdGluZyh7XG4gICAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICAgIG1heDogbWF4LFxuICAgICAgICAgICAgZml4ZWQ6IDdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge0NoYW5jZS5DaGFuY2V9XG4gICAgICovXG4gICAgcHVibGljIGdldFJhbmRvbUdlbmVyYXRvciAoKTogQ2hhbmNlLkNoYW5jZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmRvbUdlbmVyYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldFJhbmRvbUludGVnZXIgKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJhbmRvbUdlbmVyYXRvcigpLmludGVnZXIoe1xuICAgICAgICAgICAgbWluOiBtaW4sXG4gICAgICAgICAgICBtYXg6IG1heFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBvb2xcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRSYW5kb21TdHJpbmcgKGxlbmd0aDogbnVtYmVyLCBwb29sOiBzdHJpbmcgPSBSYW5kb21HZW5lcmF0b3IucmFuZG9tR2VuZXJhdG9yUG9vbCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJhbmRvbUdlbmVyYXRvcigpLnN0cmluZyh7IGxlbmd0aCwgcG9vbCB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UmFuZG9tVmFyaWFibGVOYW1lIChsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHByZWZpeDogc3RyaW5nID0gYF8ke1V0aWxzLmhleGFkZWNpbWFsUHJlZml4fWA7XG4gICAgICAgIGNvbnN0IHJhbmdlTWluSW50ZWdlcjogbnVtYmVyID0gMTAwMDA7XG4gICAgICAgIGNvbnN0IHJhbmdlTWF4SW50ZWdlcjogbnVtYmVyID0gOTk5OTk5OTk7XG4gICAgICAgIGNvbnN0IHJhbmRvbUludGVnZXI6IG51bWJlciA9IHRoaXMuZ2V0UmFuZG9tSW50ZWdlcihyYW5nZU1pbkludGVnZXIsIHJhbmdlTWF4SW50ZWdlcik7XG4gICAgICAgIGNvbnN0IGhleGFkZWNpbWFsTnVtYmVyOiBzdHJpbmcgPSBVdGlscy5kZWNUb0hleChyYW5kb21JbnRlZ2VyKTtcbiAgICAgICAgY29uc3QgcmFuZG9tVmFyaWFibGVOYW1lOiBzdHJpbmcgPSBgJHtwcmVmaXh9JHtoZXhhZGVjaW1hbE51bWJlci5zdWJzdHIoMCwgbGVuZ3RoKX1gO1xuXG4gICAgICAgIGlmICh0aGlzLnJhbmRvbVZhcmlhYmxlTmFtZVNldC5oYXMocmFuZG9tVmFyaWFibGVOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmFuZG9tVmFyaWFibGVOYW1lKGxlbmd0aCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJhbmRvbVZhcmlhYmxlTmFtZVNldC5hZGQocmFuZG9tVmFyaWFibGVOYW1lKTtcblxuICAgICAgICByZXR1cm4gcmFuZG9tVmFyaWFibGVOYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdlIG5lZWQgdG8gYWRkIG51bWJlcnMgZnJvbSBtZDUgaGFzaCBvZiBzb3VyY2UgY29kZSB0byBpbnB1dCBzZWVkIHRvIHByZXZlbnQgc2FtZSBTdHJpbmcgQXJyYXkgbmFtZVxuICAgICAqIGZvciBkaWZmZXJlbnQgYnVuZGxlcyB3aXRoIHNhbWUgc2VlZFxuICAgICAqXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFNlZWQgKCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IG1kNUhhc2g6IHN0cmluZyA9IG1kNSh0aGlzLnNvdXJjZUNvZGUuZ2V0U291cmNlQ29kZSgpKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNlZWQgKyBOdW1iZXIobWQ1SGFzaC5yZXBsYWNlKC9cXEQvZywgJycpKTtcbiAgICB9XG59XG4iXX0=