"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function SelfDefendingTemplate(escapeSequenceEncoder) {
    return "\n        var selfDefendingFunc = function () {            \n            var object = {\n                data: {\n                    key: 'cookie',\n                    value: 'timeout'\n                },\n                setCookie: function (options, name, value, document) {\n                    document = document || {};\n                    \n                    var updatedCookie = name + \"=\" + value;\n\n                    var i = 0;\n                                                            \n                    for (var i = 0, len = options.length; i < len; i++) {                          \n                        var propName = options[i];\n                                     \n                        updatedCookie += \"; \" + propName;\n                        \n                        var propValue = options[propName];\n                        \n                        options.push(propValue);\n                        len = options.length;\n                                                                        \n                        if (propValue !== true) {\n                            updatedCookie += \"=\" + propValue;\n                        }\n                    }\n\n                    document['cookie'] = updatedCookie;\n                },\n                removeCookie: function(){return 'dev';},\n                getCookie: function (document, name) {    \n                    document = document || function (value) { return value };\n                    var matches = document(new RegExp(\n                        \"(?:^|; )\" + name.replace(/([.$?*|{}()[]\\/+^])/g, '\\$1') + \"=([^;]*)\"\n                    ));\n                    \n                    var func = function (param1, param2) {\n                        param1(++param2);\n                    };\n                    \n                    func({whileFunctionName}, {timesName});\n                                        \n                    return matches ? decodeURIComponent(matches[1]) : undefined;\n                }\n            };\n            \n            var test1 = function () {\n                var regExp = new RegExp('" + escapeSequenceEncoder.encode("\\w+ *\\(\\) *{\\w+ *['|\"].+['|\"];? *}", true) + "');\n                \n                return regExp.test(object.removeCookie.toString());\n            };\n            \n            object['updateCookie'] = test1;\n            \n            var cookie = '';\n            var result = object['updateCookie']();\n                                    \n            if (!result) {\n                object['setCookie'](['*'], 'counter', 1);\n            } else if (result) {\n                cookie = object['getCookie'](null, 'counter');     \n            } else {\n                object['removeCookie']();\n            }\n        };\n        \n        selfDefendingFunc();\n    ";
}
exports.SelfDefendingTemplate = SelfDefendingTemplate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZkRlZmVuZGluZ1RlbXBsYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3RlbXBsYXRlcy9jdXN0b20tbm9kZXMvc3RyaW5nLWFycmF5LW5vZGVzL3N0cmluZy1hcnJheS1yb3RhdGUtZnVuY3Rpb24tbm9kZS9TZWxmRGVmZW5kaW5nVGVtcGxhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBUUEsK0JBQXVDLEFBQTZDO0FBQ2hGLEFBQU0sQUFBQywwbkVBa0RTLEFBQXFCLHNCQUFDLEFBQU0sQUFBQyxBQUF3QyxtREFBRSxBQUFJLEFBQy9FLEFBb0JYLEFBQUMsQUFDTjtBQUFDO0FBekVELGdDQXlFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElFc2NhcGVTZXF1ZW5jZUVuY29kZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9pbnRlcmZhY2VzL3V0aWxzL0lFc2NhcGVTZXF1ZW5jZUVuY29kZXInO1xuXG4vKipcbiAqIFNlbGZEZWZlbmRpbmdUZW1wbGF0ZS4gRW50ZXIgY29kZSBpbiBpbmZpbml0eSBsb29wLlxuICpcbiAqIEBwYXJhbSB7SUVzY2FwZVNlcXVlbmNlRW5jb2Rlcn0gZXNjYXBlU2VxdWVuY2VFbmNvZGVyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gU2VsZkRlZmVuZGluZ1RlbXBsYXRlIChlc2NhcGVTZXF1ZW5jZUVuY29kZXI6IElFc2NhcGVTZXF1ZW5jZUVuY29kZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG4gICAgICAgIHZhciBzZWxmRGVmZW5kaW5nRnVuYyA9IGZ1bmN0aW9uICgpIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdjb29raWUnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3RpbWVvdXQnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXRDb29raWU6IGZ1bmN0aW9uIChvcHRpb25zLCBuYW1lLCB2YWx1ZSwgZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQgPSBkb2N1bWVudCB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkQ29va2llID0gbmFtZSArIFwiPVwiICsgdmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBvcHRpb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IG9wdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQ29va2llICs9IFwiOyBcIiArIHByb3BOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gb3B0aW9uc1twcm9wTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaChwcm9wVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVuID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wVmFsdWUgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQ29va2llICs9IFwiPVwiICsgcHJvcFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRbJ2Nvb2tpZSddID0gdXBkYXRlZENvb2tpZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbW92ZUNvb2tpZTogZnVuY3Rpb24oKXtyZXR1cm4gJ2Rldic7fSxcbiAgICAgICAgICAgICAgICBnZXRDb29raWU6IGZ1bmN0aW9uIChkb2N1bWVudCwgbmFtZSkgeyAgICBcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQgPSBkb2N1bWVudCB8fCBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gZG9jdW1lbnQobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiKD86Xnw7IClcIiArIG5hbWUucmVwbGFjZSgvKFtcXC4kPyp8e31cXChcXClcXFtcXF1cXFxcXFwvXFwrXl0pL2csICdcXFxcJDEnKSArIFwiPShbXjtdKilcIlxuICAgICAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBmdW5jID0gZnVuY3Rpb24gKHBhcmFtMSwgcGFyYW0yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbTEoKytwYXJhbTIpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnVuYyh7d2hpbGVGdW5jdGlvbk5hbWV9LCB7dGltZXNOYW1lfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVzID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoZXNbMV0pIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB0ZXN0MSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnRXhwID0gbmV3IFJlZ0V4cCgnJHtcbiAgICAgICAgICAgICAgICAgICAgZXNjYXBlU2VxdWVuY2VFbmNvZGVyLmVuY29kZShgXFxcXHcrICpcXFxcKFxcXFwpICp7XFxcXHcrICpbJ3xcIl0uK1snfFwiXTs/ICp9YCwgdHJ1ZSlcbiAgICAgICAgICAgICAgICB9Jyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZ0V4cC50ZXN0KG9iamVjdC5yZW1vdmVDb29raWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBvYmplY3RbJ3VwZGF0ZUNvb2tpZSddID0gdGVzdDE7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBjb29raWUgPSAnJztcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBvYmplY3RbJ3VwZGF0ZUNvb2tpZSddKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0WydzZXRDb29raWUnXShbJyonXSwgJ2NvdW50ZXInLCAxKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29va2llID0gb2JqZWN0WydnZXRDb29raWUnXShudWxsLCAnY291bnRlcicpOyAgICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9iamVjdFsncmVtb3ZlQ29va2llJ10oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHNlbGZEZWZlbmRpbmdGdW5jKCk7XG4gICAgYDtcbn1cbiJdfQ==