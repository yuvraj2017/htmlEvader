"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function SelfDefendingTemplate(escapeSequenceEncoder) {
    return "\n        var StatesClass = function (rc4Bytes) {\n            this.rc4Bytes = rc4Bytes;\n            this.states = [1, 0, 0];\n            this.newState = function(){return 'newState';};\n            this.firstState = '" + escapeSequenceEncoder.encode("\\w+ *\\(\\) *{\\w+ *", true) + "';\n            this.secondState = '" + escapeSequenceEncoder.encode("['|\"].+['|\"];? *}", true) + "';\n        };\n        \n        StatesClass.prototype.checkState = function () {\n            var regExp = new RegExp(this.firstState + this.secondState);\n\n            return this.runState(regExp.test(this.newState.toString()) ? --this.states[1] : --this.states[0]);\n        };\n        \n        StatesClass.prototype.runState = function (stateResult) {\n            if (!Boolean(~stateResult)) {\n                return stateResult;\n            }\n            \n            return this.getState(this.rc4Bytes);\n        };\n\n        StatesClass.prototype.getState = function (rc4Bytes) {\n            for (var i = 0, len = this.states.length; i < len; i++) {\n                this.states.push(Math.round(Math.random()));\n                len = this.states.length;\n            }\n            \n            return rc4Bytes(this.states[0]);\n        };\n\n        new StatesClass({stringArrayCallsWrapperName}).checkState();\n    ";
}
exports.SelfDefendingTemplate = SelfDefendingTemplate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZkRlZmVuZGluZ1RlbXBsYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3RlbXBsYXRlcy9jdXN0b20tbm9kZXMvc3RyaW5nLWFycmF5LW5vZGVzL3N0cmluZy1hcnJheS1jYWxscy13cmFwcGVyL1NlbGZEZWZlbmRpbmdUZW1wbGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFNQSwrQkFBdUMsQUFBNkM7QUFDaEYsQUFBTSxBQUFDLDRPQU1LLEFBQXFCLHNCQUFDLEFBQU0sQUFBQyxBQUF1QixnQ0FBRSxBQUFJLEFBQzlELGlEQUVJLEFBQXFCLHNCQUFDLEFBQU0sQUFBQyxBQUFtQiw4QkFBRSxBQUFJLEFBQzFELEFBMkJQLEFBQUMsQUFDTjtBQUFDO0FBdkNELGdDQXVDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElFc2NhcGVTZXF1ZW5jZUVuY29kZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9pbnRlcmZhY2VzL3V0aWxzL0lFc2NhcGVTZXF1ZW5jZUVuY29kZXInO1xuXG4vKipcbiAqIEBwYXJhbSB7SUVzY2FwZVNlcXVlbmNlRW5jb2Rlcn0gZXNjYXBlU2VxdWVuY2VFbmNvZGVyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gU2VsZkRlZmVuZGluZ1RlbXBsYXRlIChlc2NhcGVTZXF1ZW5jZUVuY29kZXI6IElFc2NhcGVTZXF1ZW5jZUVuY29kZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG4gICAgICAgIHZhciBTdGF0ZXNDbGFzcyA9IGZ1bmN0aW9uIChyYzRCeXRlcykge1xuICAgICAgICAgICAgdGhpcy5yYzRCeXRlcyA9IHJjNEJ5dGVzO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZXMgPSBbMSwgMCwgMF07XG4gICAgICAgICAgICB0aGlzLm5ld1N0YXRlID0gZnVuY3Rpb24oKXtyZXR1cm4gJ25ld1N0YXRlJzt9O1xuICAgICAgICAgICAgdGhpcy5maXJzdFN0YXRlID0gJyR7XG4gICAgICAgICAgICAgICAgZXNjYXBlU2VxdWVuY2VFbmNvZGVyLmVuY29kZShgXFxcXHcrICpcXFxcKFxcXFwpICp7XFxcXHcrICpgLCB0cnVlKVxuICAgICAgICAgICAgfSc7XG4gICAgICAgICAgICB0aGlzLnNlY29uZFN0YXRlID0gJyR7XG4gICAgICAgICAgICAgICAgZXNjYXBlU2VxdWVuY2VFbmNvZGVyLmVuY29kZShgWyd8XCJdLitbJ3xcIl07PyAqfWAsIHRydWUpXG4gICAgICAgICAgICB9JztcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIFN0YXRlc0NsYXNzLnByb3RvdHlwZS5jaGVja1N0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlZ0V4cCA9IG5ldyBSZWdFeHAodGhpcy5maXJzdFN0YXRlICsgdGhpcy5zZWNvbmRTdGF0ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJ1blN0YXRlKHJlZ0V4cC50ZXN0KHRoaXMubmV3U3RhdGUudG9TdHJpbmcoKSkgPyAtLXRoaXMuc3RhdGVzWzFdIDogLS10aGlzLnN0YXRlc1swXSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBTdGF0ZXNDbGFzcy5wcm90b3R5cGUucnVuU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICghQm9vbGVhbih+c3RhdGVSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGF0ZSh0aGlzLnJjNEJ5dGVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICBTdGF0ZXNDbGFzcy5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAocmM0Qnl0ZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnN0YXRlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVzLnB1c2goTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKSk7XG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5zdGF0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcmM0Qnl0ZXModGhpcy5zdGF0ZXNbMF0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIG5ldyBTdGF0ZXNDbGFzcyh7c3RyaW5nQXJyYXlDYWxsc1dyYXBwZXJOYW1lfSkuY2hlY2tTdGF0ZSgpO1xuICAgIGA7XG59XG4iXX0=